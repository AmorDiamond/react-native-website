<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="React Native 中文网 Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="React Native 中文网 Blog Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-63485149-4","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-63485149-4"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-63485149-4",{})</script>
<link rel="search" type="application/opensearchdescription+xml" title="React Native 中文网" href="/opensearch.xml">
<link rel="icon" href="/img/pwa/manifest-icon-512.png">
<link rel="manifest" href="/manifest.json">
<meta name="theme-color" content="#20232a">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#20232a">
<link rel="apple-touch-icon" href="/img/pwa/manifest-icon-512.png">
<link rel="mask-icon" href="/img/pwa/manifest-icon-512.png" color="#06bcee">
<meta name="msapplication-TileImage" href="/img/pwa/manifest-icon-512.png">
<meta name="msapplication-TileColor" content="#20232a">
<script src="//cdn.jsdelivr.net/npm/focus-visible@5.2.0/dist/focus-visible.min.js" defer="defer"></script>
<script src="//snack.expo.io/embed.js" defer="defer"></script>
<script src="//wwads.cn/js/ads.js" defer="defer"></script><title data-react-helmet="true">性能综述 · React Native 中文网</title><meta data-react-helmet="true" name="twitter:image" content="//cdn.jsdelivr.net/gh/reactnativecn/react-native-website@gh-pages/img/logo-og.png"><meta data-react-helmet="true" name="twitter:image:alt" content="Image for React Native 中文网"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:image" content="//cdn.jsdelivr.net/gh/reactnativecn/react-native-website@gh-pages/img/logo-og.png"><meta data-react-helmet="true" property="og:title" content="性能综述 · React Native 中文网"><meta data-react-helmet="true" name="description" content="使用 React Native 替代基于 WebView 的框架来开发 App 的一个强有力的理由，就是为了使 App 可以达到每秒 60 帧（足够流畅），并且能有类似原生 App 的外观和手感。因此我们也尽可能地优化 React Native 去实现这一目标，使开发者能集中精力处理 App 的业务逻辑，而不用费心考虑性能。但是，总还是有一些地方有所欠缺，以及在某些场合 React Native 还不能够替你决定如何进行优化（用原生代码写也无法避免），因此人工的干预依然是必要的。"><meta data-react-helmet="true" property="og:description" content="使用 React Native 替代基于 WebView 的框架来开发 App 的一个强有力的理由，就是为了使 App 可以达到每秒 60 帧（足够流畅），并且能有类似原生 App 的外观和手感。因此我们也尽可能地优化 React Native 去实现这一目标，使开发者能集中精力处理 App 的业务逻辑，而不用费心考虑性能。但是，总还是有一些地方有所欠缺，以及在某些场合 React Native 还不能够替你决定如何进行优化（用原生代码写也无法避免），因此人工的干预依然是必要的。"><meta data-react-helmet="true" property="og:url" content="https://reactnative.cn/docs/next/performance"><link data-react-helmet="true" rel="shortcut icon" href="//cdn.jsdelivr.net/gh/reactnativecn/react-native-website@gh-pages/img/favicon.ico"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link data-react-helmet="true" rel="canonical" href="https://reactnative.cn/docs/next/performance"><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/reactnativecn/react-native-website@gh-pages/styles.03577274.css">
<link rel="stylesheet" href="//cdn.jsdelivr.net/gh/reactnativecn/react-native-website@gh-pages/main.6a32ba6e.css">
<link rel="preload" href="//cdn.jsdelivr.net/gh/reactnativecn/react-native-website@gh-pages/styles.6463c0d7.js" as="script">
<link rel="preload" href="//cdn.jsdelivr.net/gh/reactnativecn/react-native-website@gh-pages/main.35369828.js" as="script">
<link rel="preload" href="//cdn.jsdelivr.net/gh/reactnativecn/react-native-website@gh-pages/1.20bf0d35.js" as="script">
<link rel="preload" href="//cdn.jsdelivr.net/gh/reactnativecn/react-native-website@gh-pages/2.b2ee2dbf.js" as="script">
<link rel="preload" href="//cdn.jsdelivr.net/gh/reactnativecn/react-native-website@gh-pages/e864dc31.77df379f.js" as="script">
<link rel="preload" href="//cdn.jsdelivr.net/gh/reactnativecn/react-native-website@gh-pages/498.06e68598.js" as="script">
<link rel="preload" href="//cdn.jsdelivr.net/gh/reactnativecn/react-native-website@gh-pages/935f2afb.5501bad5.js" as="script">
<link rel="preload" href="//cdn.jsdelivr.net/gh/reactnativecn/react-native-website@gh-pages/17896441.9d61eaf2.js" as="script">
<link rel="preload" href="//cdn.jsdelivr.net/gh/reactnativecn/react-native-website@gh-pages/69697c25.9befc314.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_3aLp">Skip to main content</button></nav><nav class="navbar navbar--fixed-top navbar--dark"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img src="//cdn.jsdelivr.net/gh/reactnativecn/react-native-website@gh-pages/img/header_logo.svg" alt="React Native 中文网" class="themedImage_phiS themedImage--light_VJaY navbar__logo"><img src="//cdn.jsdelivr.net/gh/reactnativecn/react-native-website@gh-pages/img/header_logo.svg" alt="React Native 中文网" class="themedImage_phiS themedImage--dark_1NF3 navbar__logo"><strong class="navbar__title">React Native 中文网</strong></a><div class="navbar__item dropdown dropdown--hoverable dropdown--left"><a class="navbar__item navbar__link" href="/docs/next/getting-started">Next</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/next/performance">Next</a></li><li><a class="dropdown__link" href="/docs/performance">0.64</a></li><li><a class="dropdown__link" href="/docs/0.63/performance">0.63</a></li><li><a class="dropdown__link" href="/versions">所有版本</a></li></ul></div></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link navbar__link--active" href="/docs/next/getting-started">文档</a><a class="navbar__item navbar__link" href="/docs/next/components-and-apis">组件</a><a class="navbar__item navbar__link" href="/docs/next/accessibilityinfo">API</a><a href="//eleduck.com" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link eleduck">招聘</a><a href="//github.com/reactnativecn/react-native-website/issues" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">讨论</a><a href="//pushy.reactnative.cn" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">热更新</a><a class="navbar__item navbar__link" href="/about">关于</a><a href="//github.com/facebook/react-native" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar-github-link" aria-label="GitHub repository"></a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_Bh6k"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_1UDy">🌜</span></div><div class="react-toggle-track-x"><span class="toggle_1UDy">🌞</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="//cdn.jsdelivr.net/gh/reactnativecn/react-native-website@gh-pages/img/header_logo.svg" alt="React Native 中文网" class="themedImage_phiS themedImage--light_VJaY navbar__logo"><img src="//cdn.jsdelivr.net/gh/reactnativecn/react-native-website@gh-pages/img/header_logo.svg" alt="React Native 中文网" class="themedImage_phiS themedImage--dark_1NF3 navbar__logo"><strong class="navbar__title">React Native 中文网</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link navbar__link--active" href="/docs/next/getting-started">文档</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/next/components-and-apis">组件</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/next/accessibilityinfo">API</a></li><li class="menu__list-item"><a href="//eleduck.com" target="_blank" rel="noopener noreferrer" class="menu__link eleduck">招聘</a></li><li class="menu__list-item"><a href="//github.com/reactnativecn/react-native-website/issues" target="_blank" rel="noopener noreferrer" class="menu__link">讨论</a></li><li class="menu__list-item"><a href="//pushy.reactnative.cn" target="_blank" rel="noopener noreferrer" class="menu__link">热更新</a></li><li class="menu__list-item"><a class="menu__link" href="/about">关于</a></li><li class="menu__list-item"><a role="button" class="menu__link menu__link--sublist">Versions</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active" href="/docs/next/performance">Next</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/performance">0.64</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/0.63/performance">0.63</a></li><li class="menu__list-item"><a class="menu__link" href="/versions">所有版本</a></li></ul></li><li class="menu__list-item"><a href="//github.com/facebook/react-native" target="_blank" rel="noopener noreferrer" class="menu__link navbar-github-link" aria-label="GitHub repository"></a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_1mVJ"><div class="docSidebarContainer_uPTz" role="complementary"><div class="sidebar_M-Lc"><div class="menu menu--responsive thin-scrollbar menu_tgpy"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_1e05" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">入门基础</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/getting-started">简介</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/intro-react-native-components">核心组件与原生组件</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/intro-react">React 基础</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/handling-text-input">处理文本输入</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/using-a-scrollview">使用滚动视图</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/using-a-listview">使用长列表</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/platform-specific-code">特定平台代码</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/more-resources">其他参考资源</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">环境搭建</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/environment-setup">搭建开发环境</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/integration-with-existing-apps">集成到现有原生应用</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/integration-with-android-fragment">集成到 Android Fragment</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/building-for-tv">为电视和机顶盒制作应用</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/out-of-tree-platforms">多平台支持</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">开发流程</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/running-on-device">在设备上运行</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/fast-refresh">快速刷新</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/debugging">调试</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/symbolication">Symbolicating a stack trace</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/testing-overview">Testing</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/libraries">使用第三方库</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/typescript">使用 TypeScript</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/upgrading">更新</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">设计</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/style">样式</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/height-and-width">高度与宽度</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/flexbox">使用 Flexbox 布局</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/images">图片</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/colors">颜色</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">交互</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/handling-touches">处理触摸事件</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/navigation">使用导航器跳转页面</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/animations">动画</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/gesture-responder-system">手势响应系统</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">包容性</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/accessibility">无障碍功能</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">性能调优</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/next/performance">性能综述</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/optimizing-flatlist-configuration">列表配置优化</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/ram-bundles-inline-requires">RAM Bundles 和内联引用优化</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/profiling">Profiling</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/profile-hermes">Profiling with Hermes</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">JavaScript 运行环境</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/javascript-environment">JavaScript 环境</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/timers">定时器</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/hermes">使用新的 Hermes 引擎</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">网络连接</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/network">访问网络</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/security">网络安全策略</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">原生模块</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/native-modules-intro">原生模块简介</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/native-modules-android">Android 原生模块</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/native-modules-ios">iOS 原生模块</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/native-modules-setup">原生模块配置</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">原生UI组件</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/native-components-android">Android 原生UI组件</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/native-components-ios">iOS 原生UI组件</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/direct-manipulation">直接操作</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Android 指南</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/headless-js-android">Headless JS（后台任务）</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/signed-apk-android">打包APK</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">iOS 指南</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/linking-libraries-ios">链接原生库</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/running-on-simulator-ios">在iOS模拟器上运行</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/communication-ios">和原生端通信</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/app-extensions">iOS应用扩展</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/publishing-to-app-store">上架 App Store</a></li></ul></li></ul></div></div></div><main class="docMainContainer_1zi2"><div class="container padding-vert--lg docItemWrapper_1hMI"><div class="row"><div class="col docItemCol_2AGf"><div class="alert alert--warning margin-bottom--md" role="alert"><div>注意：这是尚未发布的测试版本的文档。</div><div class="margin-top--md">要查看当前正式版本的文档，请点击 <strong><a href="/docs/performance">最新正式版文档</a></strong> (0.64).</div></div><div class="docItemContainer_1tAC"><article><div><span class="badge badge--secondary">版本: Next</span></div><header><h1 class="docTitle_cWlf">性能综述</h1></header><a href="https://datayi.cn/w/Yo1vDOv9" target="_blank" style="display:block;padding:12px;background-color:#eee;color:#666;margin-bottom:15px"><span style="font-weight:bold;color:#05a5d1">React 实战教程</span> 深入学习一线大厂必备前端技能，VIP 教程限时免费领取。 <span style="border:solid 1px #666;padding:4px 6px;margin-left:8px;vertical-align:middle">立即查看 &gt;</span></a><div class="markdown"><p>使用 React Native 替代基于 WebView 的框架来开发 App 的一个强有力的理由，就是为了使 App 可以达到每秒 60 帧（足够流畅），并且能有类似原生 App 的外观和手感。因此我们也尽可能地优化 React Native 去实现这一目标，使开发者能集中精力处理 App 的业务逻辑，而不用费心考虑性能。但是，总还是有一些地方有所欠缺，以及在某些场合 React Native 还不能够替你决定如何进行优化（用原生代码写也无法避免），因此人工的干预依然是必要的。</p><p>本文的目的是教给你一些基本的知识，来帮你排查性能方面的问题，以及探讨这些问题产生的原因和推荐的解决方法。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_E4oP" id="关于帧你所需要知道的"></a>关于“帧”你所需要知道的<a class="hash-link" href="#关于帧你所需要知道的" title="Direct link to heading">#</a></h2><p>老一辈人常常把电影称为“移动的画”，是因为视频中逼真的动态效果其实是一种幻觉，这种幻觉是由一组静态的图片以一个稳定的速度快速变化所产生的。我们把这组图片中的每一张图片叫做一帧，而每秒钟显示的帧数直接的影响了视频（或者说用户界面）的流畅度和真实感。iOS 设备提供了每秒 60 的帧率，这就留给了开发者和 UI 系统大约 16.67ms 来完成生成一张静态图片（帧）所需要的所有工作。如果在这分派的 16.67ms 之内没有能够完成这些工作，就会引发‘丢帧’的后果，使界面表现的不够流畅。</p><p>下面要讲的事情可能更为复杂：请先调出你应用的开发菜单，打开<code>Show FPS Monitor</code>. 你会注意到有两个不同的帧率.</p><p><img src="//cdn.jsdelivr.net/gh/reactnativecn/react-native-website@gh-pages/assets/images/PerfUtil-38a2ddbf1777887d70563a644c72aa64.png"></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_E4oP" id="js-帧率javascript-线程"></a>JS 帧率(JavaScript 线程)<a class="hash-link" href="#js-帧率javascript-线程" title="Direct link to heading">#</a></h3><p>对大多数 React Native 应用来说，业务逻辑是运行在 JavaScript 线程上的。这是 React 应用所在的线程，也是发生 API 调用，以及处理触摸事件等操作的线程。更新数据到原生支持的视图是批量进行的，并且在事件循环每进行一次的时候被发送到原生端，这一步通常会在一帧时间结束之前处理完（如果一切顺利的话）。如果 JavaScript 线程有一帧没有及时响应，就被认为发生了一次丢帧。 例如，你在一个复杂应用的根组件上调用了<code>this.setState</code>，从而导致一次开销很大的子组件树的重绘，可想而知，这可能会花费 200ms 也就是整整 12 帧的丢失。此时，任何由 JavaScript 控制的动画都会卡住。只要卡顿超过 100ms，用户就会明显的感觉到。</p><p>这种情况经常发生在老的<code>Navigator</code>导航器的切换过程中：当你 push 一个新的路由时，JavaScript 需要绘制新场景所需的所有组件，以发送正确的命令给原生端去创建视图。由于切换是由 JavaScript 线程所控制，因此经常会占用若干帧的时间，引起一些卡顿。有的时候，组件会在<code>componentDidMount</code>函数中做一些额外的事情，这甚至可能会导致页面切换过程中多达一秒的卡顿。</p><p>另一个例子是老的触摸事件的响应：如果你正在 JavaScript 线程处理一个跨越多个帧的工作，你可能会注意到<code>TouchableOpacity</code>的响应被延迟了。这是因为 JavaScript 线程太忙了，不能够处理主线程发送过来的原始触摸事件，结果<code>TouchableOpacity</code>就不能及时响应这些事件并命令主线程的页面去调整透明度了。</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_E4oP" id="ui-帧率主线程"></a>UI 帧率(主线程)<a class="hash-link" href="#ui-帧率主线程" title="Direct link to heading">#</a></h3><p>很多人会注意到，<code>NavigatorIOS</code>的性能要比老的纯 JS 实现的<code>Navigator</code>好的多。原因就是它的切换动画是完全在主线程上执行的，因此不会被 JavaScript 线程上的掉帧所影响。</p><p>同样，当 JavaScript 线程卡住的时候，你仍然可以欢快的上下滚动<code>ScrollView</code>，因为<code>ScrollView</code>运行在主线程之上（尽管滚动事件会被分发到 JS 线程，但是接收这些事件对于滚动这个动作来说并不必要）。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_E4oP" id="性能问题的常见原因"></a>性能问题的常见原因<a class="hash-link" href="#性能问题的常见原因" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_E4oP" id="开发模式-devtrue"></a>开发模式 (<code>dev=true</code>)<a class="hash-link" href="#开发模式-devtrue" title="Direct link to heading">#</a></h3><p>JavaScript 线程的性能在开发模式下是很糟糕的。这是不可避免的，因为有许多工作需要在运行的时候去做，譬如使你获得良好的警告和错误信息，又比如验证属性类型（propTypes）以及产生各种其他的警告。请务必注意在<a href="/docs/next/running-on-device#%E5%8F%91%E5%B8%83%E5%BA%94%E7%94%A8">release 模式</a>下去测试性能。</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_E4oP" id="consolelog-语句"></a>console.log 语句<a class="hash-link" href="#consolelog-语句" title="Direct link to heading">#</a></h3><p>在运行打好了离线包的应用时，控制台大量打印语句可能会拖累 JavaScript 线程。注意有些第三方调试库也可能包含控制台打印语句，比如<a href="https://github.com/evgenyrodionov/redux-logger" target="_blank" rel="noopener noreferrer">redux-logger</a>，所以在发布应用前请务必仔细检查，确保全部移除。</p><blockquote><p>有个<a href="https://babeljs.io/docs/plugins/transform-remove-console/" target="_blank" rel="noopener noreferrer">babel 插件</a>可以帮你移除所有的<code>console.*</code>调用。首先需要使用<code>yarn add --dev babel-plugin-transform-remove-console</code>来安装，然后在项目根目录下编辑（或者是新建）一个名为·.babelrc`的文件，在其中加入：</p></blockquote><div class="mdxCodeBlock_1daz"><div class="codeBlockContent_2es_"><div tabindex="0" class="prism-code language-json codeBlock_27aQ thin-scrollbar"><div class="codeBlockLines_2rCb" style="color:#FFFFFF;background:#282C34"><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">  </span><span class="token property" style="color:#2aa198">&quot;env&quot;</span><span class="token operator" style="color:#fc929e">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">    </span><span class="token property" style="color:#2aa198">&quot;production&quot;</span><span class="token operator" style="color:#fc929e">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">      </span><span class="token property" style="color:#2aa198">&quot;plugins&quot;</span><span class="token operator" style="color:#fc929e">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">[</span><span class="token string" style="color:#8dc891">&quot;transform-remove-console&quot;</span><span class="token punctuation" style="color:#657b83">]</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">    </span><span class="token punctuation" style="color:#657b83">}</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">  </span><span class="token punctuation" style="color:#657b83">}</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2bml">Copy</button></div></div><p>这样在打包发布时，所有的控制台语句就会被自动移除，而在调试时它们仍然会被正常调用。</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_E4oP" id="listview-首次渲染缓慢或者由于列表很大导致滑动很慢"></a><code>ListView</code> 首次渲染缓慢或者由于列表很大导致滑动很慢<a class="hash-link" href="#listview-首次渲染缓慢或者由于列表很大导致滑动很慢" title="Direct link to heading">#</a></h3><p>用新的<a href="/docs/next/flatlist"><code>FlatList</code></a>或者<a href="/docs/next/sectionlist"><code>SectionList</code></a>组件替代。除了简化了API，这些新的列表组件在性能方面都有了极大的提升, 其中最主要的一个是无论列表有多少行，它的内存使用都是常数级的。</p><p>如果你的<a href="/docs/next/flatlist"><code>FlatList</code></a>渲染得很慢, 请确保你使用了<a href="/docs/next/flatlist#getitemlayout"><code>getItemLayout</code></a>，它通过跳过对items的处理来优化你的渲染速度。</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_E4oP" id="在重绘一个几乎没有什么变化的页面时，js-帧率严重降低"></a>在重绘一个几乎没有什么变化的页面时，JS 帧率严重降低<a class="hash-link" href="#在重绘一个几乎没有什么变化的页面时，js-帧率严重降低" title="Direct link to heading">#</a></h3><p>你可以实现<code>shouldComponentUpdate</code>函数来指明在什么样的确切条件下，你希望这个组件得到重绘。如果你编写的是纯粹的组件（界面完全由 props 和 state 所决定），你可以利用<code>PureComponent</code>来为你做这个工作。再强调一次，不可变的数据结构（immutable，即对于引用类型数据，不修改原值，而是复制后修改并返回新值）在提速方面非常有用 —— 当你不得不对一个长列表对象做一个深度的比较，它会使重绘你的整个组件更加快速，而且代码量更少。</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_E4oP" id="dropping-js-thread-fps-because-of-doing-a-lot-of-work-on-the-javascript-thread-at-the-same-time"></a>Dropping JS thread FPS because of doing a lot of work on the JavaScript thread at the same time<a class="hash-link" href="#dropping-js-thread-fps-because-of-doing-a-lot-of-work-on-the-javascript-thread-at-the-same-time" title="Direct link to heading">#</a></h3><p>&quot;Slow Navigator transitions&quot; is the most common manifestation of this, but there are other times this can happen. Using InteractionManager can be a good approach, but if the user experience cost is too high to delay work during an animation, then you might want to consider LayoutAnimation.</p><p>The Animated API currently calculates each keyframe on-demand on the JavaScript thread unless you <a href="/blog/2017/02/14/using-native-driver-for-animated.html#how-do-i-use-this-in-my-app">set <code>useNativeDriver: true</code></a>, while LayoutAnimation leverages Core Animation and is unaffected by JS thread and main thread frame drops.</p><p>One case where I have used this is for animating in a modal (sliding down from top and fading in a translucent overlay) while initializing and perhaps receiving responses for several network requests, rendering the contents of the modal, and updating the view where the modal was opened from. See the Animations guide for more information about how to use LayoutAnimation.</p><p>Caveats:</p><ul><li>LayoutAnimation only works for fire-and-forget animations (&quot;static&quot; animations) -- if it must be interruptible, you will need to use <code>Animated</code>.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_E4oP" id="在屏幕上移动视图（滚动，切换，旋转）时，ui-线程掉帧"></a>在屏幕上移动视图（滚动，切换，旋转）时，UI 线程掉帧<a class="hash-link" href="#在屏幕上移动视图（滚动，切换，旋转）时，ui-线程掉帧" title="Direct link to heading">#</a></h3><p>当具有透明背景的文本位于一张图片上时，或者在每帧重绘视图时需要用到透明合成的任何其他情况下，这种现象尤为明显。设置<code>shouldRasterizeIOS</code>或者<code>renderToHardwareTextureAndroid</code>属性可以显著改善这一现象。
注意不要过度使用该特性，否则你的内存使用量将会飞涨。在使用时，要评估你的性能和内存使用情况。如果你没有需要移动这个视图的需求，请关闭这一属性。</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_E4oP" id="使用动画改变图片的尺寸时，ui-线程掉帧"></a>使用动画改变图片的尺寸时，UI 线程掉帧<a class="hash-link" href="#使用动画改变图片的尺寸时，ui-线程掉帧" title="Direct link to heading">#</a></h3><p>在 iOS 上，每次调整 Image 组件的宽度或者高度，都需要重新裁剪和缩放原始图片。这个操作开销会非常大，尤其是大的图片。比起直接修改尺寸，更好的方案是使用<code>transform: [{scale}]</code>的样式属性来改变尺寸。比如当你点击一个图片，要将它放大到全屏的时候，就可以使用这个属性。</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_E4oP" id="touchable-系列组件不能很好的响应"></a>Touchable 系列组件不能很好的响应<a class="hash-link" href="#touchable-系列组件不能很好的响应" title="Direct link to heading">#</a></h3><p>有些时候，如果我们有一项操作与点击事件所带来的透明度改变或者高亮效果发生在同一帧中，那么有可能在<code>onPress</code>函数结束之前我们都看不到这些效果。比如在<code>onPress</code>执行了一个<code>setState</code>的操作，这个操作需要大量计算工作并且导致了掉帧。对此的一个解决方案是将<code>onPress</code>处理函数中的操作封装到<code>requestAnimationFrame</code>中：</p><div class="mdxCodeBlock_1daz"><div class="codeBlockContent_2es_"><div tabindex="0" class="prism-code language-jsx codeBlock_27aQ thin-scrollbar"><div class="codeBlockLines_2rCb" style="color:#FFFFFF;background:#282C34"><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token function" style="color:#79b6f2">handleOnPress</span><span class="token punctuation" style="color:#657b83">(</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">  </span><span class="token function" style="color:#79b6f2">requestAnimationFrame</span><span class="token punctuation" style="color:#657b83">(</span><span class="token punctuation" style="color:#657b83">(</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"> </span><span class="token operator" style="color:#fc929e">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">this</span><span class="token punctuation" style="color:#657b83">.</span><span class="token function" style="color:#79b6f2">doExpensiveAction</span><span class="token punctuation" style="color:#657b83">(</span><span class="token punctuation" style="color:#657b83">)</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">  </span><span class="token punctuation" style="color:#657b83">}</span><span class="token punctuation" style="color:#657b83">)</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2bml">Copy</button></div></div></div></article><div class="docMetadata margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/reactnativecn/react-native-website/blob/production/cnwebsite/../cndocs/performance.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2Hwv"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>改进文档</a></div><div class="col text--right"><em><small class="docMetadata-updated">最近更新  <time datetime="2021-03-27T14:36:54.000Z" class="docLastUpdatedAt_1gIo">3/27/2021</time></small></em></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/next/accessibility"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« 无障碍功能</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/next/optimizing-flatlist-configuration"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">列表配置优化 »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_1R02 thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#关于帧你所需要知道的" class="table-of-contents__link">关于“帧”你所需要知道的</a><ul><li><a href="#js-帧率javascript-线程" class="table-of-contents__link">JS 帧率(JavaScript 线程)</a></li><li><a href="#ui-帧率主线程" class="table-of-contents__link">UI 帧率(主线程)</a></li></ul></li><li><a href="#性能问题的常见原因" class="table-of-contents__link">性能问题的常见原因</a><ul><li><a href="#开发模式-devtrue" class="table-of-contents__link">开发模式 (<code>dev=true</code>)</a></li><li><a href="#consolelog-语句" class="table-of-contents__link">console.log 语句</a></li><li><a href="#listview-首次渲染缓慢或者由于列表很大导致滑动很慢" class="table-of-contents__link"><code>ListView</code> 首次渲染缓慢或者由于列表很大导致滑动很慢</a></li><li><a href="#在重绘一个几乎没有什么变化的页面时，js-帧率严重降低" class="table-of-contents__link">在重绘一个几乎没有什么变化的页面时，JS 帧率严重降低</a></li><li><a href="#dropping-js-thread-fps-because-of-doing-a-lot-of-work-on-the-javascript-thread-at-the-same-time" class="table-of-contents__link">Dropping JS thread FPS because of doing a lot of work on the JavaScript thread at the same time</a></li><li><a href="#在屏幕上移动视图（滚动，切换，旋转）时，ui-线程掉帧" class="table-of-contents__link">在屏幕上移动视图（滚动，切换，旋转）时，UI 线程掉帧</a></li><li><a href="#使用动画改变图片的尺寸时，ui-线程掉帧" class="table-of-contents__link">使用动画改变图片的尺寸时，UI 线程掉帧</a></li><li><a href="#touchable-系列组件不能很好的响应" class="table-of-contents__link">Touchable 系列组件不能很好的响应</a></li></ul></li></ul><div class="wwads-cn wwads-vertical" data-id="58" style="max-width:200px;margin-top:20px"></div></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">React Native 中文网 © 2021 武汉青罗网络科技有限公司
      <a style="margin-left:10px" href="http://beian.miit.gov.cn/">鄂ICP备20002031号-3</a>
      <img style="width:25px" src="//img.alicdn.com/tfs/TB1..50QpXXXXX7XpXXXXXXXXXX-40-40.png" alt="鄂公网安备 42011202001821号">
      <a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=42011202001821">鄂公网安备 42011202001821号</a>
      </div></div></div></footer></div>
<script src="//cdn.jsdelivr.net/gh/reactnativecn/react-native-website@gh-pages/styles.6463c0d7.js"></script>
<script src="//cdn.jsdelivr.net/gh/reactnativecn/react-native-website@gh-pages/main.35369828.js"></script>
<script src="//cdn.jsdelivr.net/gh/reactnativecn/react-native-website@gh-pages/1.20bf0d35.js"></script>
<script src="//cdn.jsdelivr.net/gh/reactnativecn/react-native-website@gh-pages/2.b2ee2dbf.js"></script>
<script src="//cdn.jsdelivr.net/gh/reactnativecn/react-native-website@gh-pages/e864dc31.77df379f.js"></script>
<script src="//cdn.jsdelivr.net/gh/reactnativecn/react-native-website@gh-pages/498.06e68598.js"></script>
<script src="//cdn.jsdelivr.net/gh/reactnativecn/react-native-website@gh-pages/935f2afb.5501bad5.js"></script>
<script src="//cdn.jsdelivr.net/gh/reactnativecn/react-native-website@gh-pages/17896441.9d61eaf2.js"></script>
<script src="//cdn.jsdelivr.net/gh/reactnativecn/react-native-website@gh-pages/69697c25.9befc314.js"></script>
</body>
</html>