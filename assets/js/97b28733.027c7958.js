"use strict";(self.webpackChunkreact_native_website=self.webpackChunkreact_native_website||[]).push([[59851],{35318:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>f});var i=n(27378);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var p=i.createContext({}),s=function(e){var t=i.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},c=function(e){var t=s(e.components);return i.createElement(p.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},d=i.forwardRef((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,p=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),d=s(n),f=r,m=d["".concat(p,".").concat(f)]||d[f]||u[f]||a;return n?i.createElement(m,o(o({ref:t},c),{},{components:n})):i.createElement(m,o({ref:t},c))}));function f(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,o=new Array(a);o[0]=d;var l={};for(var p in t)hasOwnProperty.call(t,p)&&(l[p]=t[p]);l.originalType=e,l.mdxType="string"==typeof e?e:r,o[1]=l;for(var s=2;s<a;s++)o[s]=n[s];return i.createElement.apply(null,o)}return i.createElement.apply(null,n)}d.displayName="MDXCreateElement"},32257:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>h,contentTitle:()=>f,default:()=>b,frontMatter:()=>d,metadata:()=>m,toc:()=>y});var i=n(35318),r=Object.defineProperty,a=Object.defineProperties,o=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,c=(e,t,n)=>t in e?r(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,u=(e,t)=>{for(var n in t||(t={}))p.call(t,n)&&c(e,n,t[n]);if(l)for(var n of l(t))s.call(t,n)&&c(e,n,t[n]);return e};const d={id:"speeding-ci-builds",title:"\u4f18\u5316 CI \u6784\u5efa"},f=void 0,m={unversionedId:"speeding-ci-builds",id:"version-0.72/speeding-ci-builds",title:"\u4f18\u5316 CI \u6784\u5efa",description:"You or your company may have set up a Continuous Integration (CI) environment to test your React Native application.",source:"@site/versioned_docs/version-0.72/speeding-ci-builds.md",sourceDirName:".",slug:"/speeding-ci-builds",permalink:"/docs/speeding-ci-builds",draft:!1,editUrl:"https://github.com/reactnativecn/react-native-website/blob/production/cnwebsite/../cndocs/speeding-ci-builds.md",tags:[],version:"0.72",frontMatter:{id:"speeding-ci-builds",title:"\u4f18\u5316 CI \u6784\u5efa"},sidebar:"docs",previous:{title:"\u4f18\u5316\u7f16\u8bd1\u901f\u5ea6",permalink:"/docs/build-speed"},next:{title:"\u5217\u8868\u914d\u7f6e\u4f18\u5316",permalink:"/docs/optimizing-flatlist-configuration"}},h={},y=[{value:"Disable Flipper for iOS",id:"disable-flipper-for-ios",level:2},{value:"Handle Transitive Dependencies",id:"handle-transitive-dependencies",level:3}],v={toc:y};function b(e){var t,n=e,{components:r}=n,c=((e,t)=>{var n={};for(var i in e)p.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&l)for(var i of l(e))t.indexOf(i)<0&&s.call(e,i)&&(n[i]=e[i]);return n})(n,["components"]);return(0,i.kt)("wrapper",(t=u(u({},v),c),a(t,o({components:r,mdxType:"MDXLayout"}))),(0,i.kt)("p",null,"You or your company may have set up a Continuous Integration (CI) environment to test your React Native application."),(0,i.kt)("p",null,"A fast CI service is important for 2 reasons:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"The more time CI machines are running, the more they cost."),(0,i.kt)("li",{parentName:"ul"},"The longer the CI jobs take to run, the longer the development loop.")),(0,i.kt)("p",null,"It is therefore important to try and minimize the time the CI environment spends building React Native."),(0,i.kt)("h2",u({},{id:"disable-flipper-for-ios"}),"Disable Flipper for iOS"),(0,i.kt)("p",null,(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/facebook/flipper"}),"Flipper")," is a debugging tool shipped by default with React Native, to help developers debug and profile their React Native applications. However, Flipper is not required in CI: it is very unlikely that you or one of your collegue would have to debug the app built in the CI environment."),(0,i.kt)("p",null,"For iOS apps, Flipper is built every time the React Native framework is built and it may require some time to build, and this is time you can save."),(0,i.kt)("p",null,"Starting from React Native 0.71, we introduced a new flag in the template's Podfile: the ",(0,i.kt)("a",u({parentName:"p"},{href:"https://github.com/facebook/react-native/blob/main/packages/react-native/template/ios/Podfile#L20"}),(0,i.kt)("inlineCode",{parentName:"a"},"NO_FLIPPER")," flag"),"."),(0,i.kt)("p",null,"By default, the ",(0,i.kt)("inlineCode",{parentName:"p"},"NO_FLIPPER")," flag is not set, therefore Flipper will be included by default in your app."),(0,i.kt)("p",null,"You can specify ",(0,i.kt)("inlineCode",{parentName:"p"},"NO_FLIPPER=1")," when installing your iOS pods, to instruct React Native not to install Flipper. Typically, the command would look like this:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-shell"}),"# from the root folder of the react native project\nNO_FLIPPER=1 bundle exec pod install --project-directory=ios\n")),(0,i.kt)("p",null,"Add this command in your CI environment to skip the installation of Flipper dependencies and thus saving time and money."),(0,i.kt)("h3",u({},{id:"handle-transitive-dependencies"}),"Handle Transitive Dependencies"),(0,i.kt)("p",null,"Your app may be using some libraries which depends on the Flipper pods. If that's your case, disabling flipper with the ",(0,i.kt)("inlineCode",{parentName:"p"},"NO_FLIPPER")," flag may not be enough: your app may fail to build in this case."),(0,i.kt)("p",null,"The proper way to handle this case is to add a custom configuration for react native, instructing the app to properly install the transitive dependency. To achieve that:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"If you don't have it already, create a new file called ",(0,i.kt)("inlineCode",{parentName:"li"},"react-native.config.js"),"."),(0,i.kt)("li",{parentName:"ol"},"Exclude explicitly the transitive dependency from the ",(0,i.kt)("inlineCode",{parentName:"li"},"dependencies")," when the flag is turned on.")),(0,i.kt)("p",null,"For example, the ",(0,i.kt)("inlineCode",{parentName:"p"},"react-native-flipper")," library is an additional library that depends on Flipper. If your app uses that, you need to exclude it from the dependencies. Your ",(0,i.kt)("inlineCode",{parentName:"p"},"react-native.config.js")," would look like this:"),(0,i.kt)("pre",null,(0,i.kt)("code",u({parentName:"pre"},{className:"language-js",metastring:'title="react-native.config.js"',title:'"react-native.config.js"'}),"module.exports = {\n  // other fields\n  dependencies: {\n    ...(process.env.NO_FLIPPER\n      ? {'react-native-flipper': {platforms: {ios: null}}}\n      : {}),\n  },\n};\n")))}b.isMDXComponent=!0}}]);