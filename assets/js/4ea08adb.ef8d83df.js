"use strict";(self.webpackChunkreact_native_website=self.webpackChunkreact_native_website||[]).push([[35228],{35318:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>m});var r=n(27378);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=r.createContext({}),s=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},c=function(e){var t=s(e.components);return r.createElement(l.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,l=e.parentName,c=p(e,["components","mdxType","originalType","parentName"]),d=s(n),m=a,b=d["".concat(l,".").concat(m)]||d[m]||u[m]||o;return n?r.createElement(b,i(i({ref:t},c),{},{components:n})):r.createElement(b,i({ref:t},c))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,i=new Array(o);i[0]=d;var p={};for(var l in t)hasOwnProperty.call(t,l)&&(p[l]=t[l]);p.originalType=e,p.mdxType="string"==typeof e?e:a,i[1]=p;for(var s=2;s<o;s++)i[s]=n[s];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},67754:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>f,contentTitle:()=>m,default:()=>y,frontMatter:()=>d,metadata:()=>b,toc:()=>g});var r=n(35318),a=Object.defineProperty,o=Object.defineProperties,i=Object.getOwnPropertyDescriptors,p=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,c=(e,t,n)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,u=(e,t)=>{for(var n in t||(t={}))l.call(t,n)&&c(e,n,t[n]);if(p)for(var n of p(t))s.call(t,n)&&c(e,n,t[n]);return e};const d={id:"publishing-to-app-store",title:"\u4e0a\u67b6 App Store"},m=void 0,b={unversionedId:"publishing-to-app-store",id:"publishing-to-app-store",title:"\u4e0a\u67b6 App Store",description:"\u4e0a\u67b6\u5e94\u7528\u7684\u8fc7\u7a0b\u548c\u4efb\u4f55\u5176\u5b83\u539f\u751f iOS \u5e94\u7528\u4e00\u6837\uff0c\u4f46\u6709\u4e00\u4e9b\u989d\u5916\u7684\u6ce8\u610f\u4e8b\u9879\u8981\u8003\u8651\u3002",source:"@site/../cndocs/publishing-to-app-store.md",sourceDirName:".",slug:"/publishing-to-app-store",permalink:"/docs/next/publishing-to-app-store",draft:!1,editUrl:"https://github.com/reactnativecn/react-native-website/blob/production/cnwebsite/../cndocs/publishing-to-app-store.md",tags:[],version:"current",frontMatter:{id:"publishing-to-app-store",title:"\u4e0a\u67b6 App Store"},sidebar:"docs",previous:{title:"iOS\u5e94\u7528\u6269\u5c55",permalink:"/docs/next/app-extensions"}},f={},g=[{value:"1. Enable App Transport Security",id:"1-enable-app-transport-security",level:3},{value:"2. \u914d\u7f6e release scheme",id:"2-\u914d\u7f6e-release-scheme",level:3},{value:"\u5173\u4e8e\u542f\u52a8\u5c4f\u7684\u4f18\u5316\u6280\u5de7",id:"\u5173\u4e8e\u542f\u52a8\u5c4f\u7684\u4f18\u5316\u6280\u5de7",level:4},{value:"3. \u7f16\u8bd1\u53d1\u5e03 app",id:"3-\u7f16\u8bd1\u53d1\u5e03-app",level:3}],h={toc:g};function y(e){var t,a=e,{components:c}=a,d=((e,t)=>{var n={};for(var r in e)l.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&p)for(var r of p(e))t.indexOf(r)<0&&s.call(e,r)&&(n[r]=e[r]);return n})(a,["components"]);return(0,r.kt)("wrapper",(t=u(u({},h),d),o(t,i({components:c,mdxType:"MDXLayout"}))),(0,r.kt)("p",null,"\u4e0a\u67b6\u5e94\u7528\u7684\u8fc7\u7a0b\u548c\u4efb\u4f55\u5176\u5b83\u539f\u751f iOS \u5e94\u7528\u4e00\u6837\uff0c\u4f46\u6709\u4e00\u4e9b\u989d\u5916\u7684\u6ce8\u610f\u4e8b\u9879\u8981\u8003\u8651\u3002"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"If you are using Expo then read the Expo Guide for ",(0,r.kt)("a",u({parentName:"p"},{href:"https://docs.expo.io/versions/latest/distribution/building-standalone-apps/"}),"Building Standalone Apps"),".")),(0,r.kt)("h3",u({},{id:"1-enable-app-transport-security"}),"1. Enable App Transport Security"),(0,r.kt)("p",null,"App Transport Security \u662f iOS 9 \u5f15\u5165\u7684\u4e00\u9879\u5b89\u5168\u7279\u6027\uff0c\u62d2\u7edd\u4e0d\u901a\u8fc7 HTTPS \u53d1\u9001\u7684\u6240\u6709 HTTP \u8bf7\u6c42\u3002\u8fd9\u4f1a\u5bfc\u81f4 HTTP \u4f20\u8f93\u963b\u585e\uff0c\u5305\u62ec\u5f00\u53d1\u8005 React Native \u670d\u52a1\u5668\u3002\u4e3a\u4e86\u4f7f\u5f00\u53d1\u5bb9\u6613\uff0c\u5728 React Native projects \u91cc ATS \u9ed8\u8ba4\u4e3a",(0,r.kt)("inlineCode",{parentName:"p"},"localhost"),"\u7981\u7528\u3002"),(0,r.kt)("p",null,"You should re-enable ATS prior to building your app for production by removing the ",(0,r.kt)("inlineCode",{parentName:"p"},"localhost")," entry from the ",(0,r.kt)("inlineCode",{parentName:"p"},"NSExceptionDomains")," dictionary and setting ",(0,r.kt)("inlineCode",{parentName:"p"},"NSAllowsArbitraryLoads")," to ",(0,r.kt)("inlineCode",{parentName:"p"},"false")," in your ",(0,r.kt)("inlineCode",{parentName:"p"},"Info.plist")," file in the ",(0,r.kt)("inlineCode",{parentName:"p"},"ios/")," folder. You can also re-enable ATS from within Xcode by opening your target properties under the Info pane and editing the App Transport Security Settings entry."),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"If your application needs to access HTTP resources on production, see ",(0,r.kt)("a",u({parentName:"p"},{href:"http://ste.vn/2015/06/10/configuring-app-transport-security-ios-9-osx-10-11/"}),"this post")," to learn how to configure ATS on your project.")),(0,r.kt)("h3",u({},{id:"2-\u914d\u7f6e-release-scheme"}),"2. \u914d\u7f6e release scheme"),(0,r.kt)("p",null,"\u9700\u8981\u5728 Xcode \u4f7f\u7528",(0,r.kt)("inlineCode",{parentName:"p"},"Release")," scheme \u7f16\u8bd1\u5728 App Store \u53d1\u5e03\u7684 app\u3002",(0,r.kt)("inlineCode",{parentName:"p"},"Release"),"\u7248\u672c\u7684\u5e94\u7528\u4f1a\u81ea\u52a8\u7981\u7528\u5f00\u53d1\u8005\u83dc\u5355\uff0c\u540c\u65f6\u4e5f\u4f1a\u5c06 js \u6587\u4ef6\u548c\u9759\u6001\u56fe\u7247\u6253\u5305\u538b\u7f29\u540e\u5185\u7f6e\u5230\u5305\u4e2d\uff0c\u8fd9\u6837\u5e94\u7528\u53ef\u4ee5\u5728\u672c\u5730\u8bfb\u53d6\u800c\u65e0\u9700\u8bbf\u95ee\u5f00\u53d1\u670d\u52a1\u5668\uff08\u540c\u65f6\u8fd9\u6837\u4e00\u6765\u4f60\u4e5f\u65e0\u6cd5\u518d\u8c03\u8bd5\uff0c\u9700\u8981\u8c03\u8bd5\u8bf7\u5c06 Buiid Configuration \u518d\u6539\u4e3a debug\uff09\u3002",(0,r.kt)("br",{parentName:"p"}),"\n","\u7531\u4e8e\u53d1\u5e03\u7248\u672c\u5df2\u7ecf\u5185\u7f6e\u4e86 js \u6587\u4ef6\uff0c\u56e0\u800c\u4e5f\u65e0\u6cd5\u518d\u901a\u8fc7\u5f00\u53d1\u670d\u52a1\u5668\u6765\u5b9e\u65f6\u66f4\u65b0\u3002\u9762\u5411\u7528\u6237\u7684\u70ed\u66f4\u65b0\uff0c\u8bf7\u4f7f\u7528\u4e13\u95e8\u7684",(0,r.kt)("a",u({parentName:"p"},{href:"https://pushy.reactnative.cn"}),"\u70ed\u66f4\u65b0\u670d\u52a1"),"\u3002"),(0,r.kt)("p",null,"\u8981\u914d\u7f6e app \u4e3a\u4f7f\u7528",(0,r.kt)("inlineCode",{parentName:"p"},"Release")," scheme \u7f16\u8bd1\uff0c\u8bf7\u524d\u5f80",(0,r.kt)("strong",{parentName:"p"},"Product")," \u2192 ",(0,r.kt)("strong",{parentName:"p"},"Scheme")," \u2192 ",(0,r.kt)("strong",{parentName:"p"},"Edit Scheme"),"\u3002\u9009\u62e9\u4fa7\u8fb9\u680f\u7684",(0,r.kt)("strong",{parentName:"p"},"Run"),"\u6807\u7b7e\uff0c\u7136\u540e\u8bbe\u7f6e\u4e0b\u62c9\u7684 Build Configuration \u4e3a",(0,r.kt)("inlineCode",{parentName:"p"},"Release"),"\u3002"),(0,r.kt)("p",null,(0,r.kt)("img",{src:n(84217).Z,width:"718",height:"486"})),(0,r.kt)("h4",u({},{id:"\u5173\u4e8e\u542f\u52a8\u5c4f\u7684\u4f18\u5316\u6280\u5de7"}),"\u5173\u4e8e\u542f\u52a8\u5c4f\u7684\u4f18\u5316\u6280\u5de7"),(0,r.kt)("p",null,"\u968f\u7740 App \u5305\u5927\u5c0f\u7684\u589e\u957f\uff0c\u53ef\u80fd\u5f00\u59cb\u5728\u542f\u52a8\u5c4f(splash)\u548c\u6839\u5e94\u7528\u89c6\u56fe\u663e\u793a\u4e4b\u95f4\u770b\u5230\u767d\u5c4f\u95ea\u73b0\u3002\u5982\u679c\u662f\u8fd9\u6837\uff0c\u4e3a\u4e86\u5728\u8f6c\u6362\u671f\u95f4\u4fdd\u6301\u542f\u52a8\u5c4f\u663e\u793a\uff0c\u53ef\u4ee5\u6dfb\u52a0\u4e0b\u5217\u4ee3\u7801\u5230",(0,r.kt)("inlineCode",{parentName:"p"},"AppDelegate.m"),"\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",u({parentName:"pre"},{className:"language-objectivec"}),'  // Place this code after "[self.window makeKeyAndVisible]" and before "return YES;"\n  UIStoryboard *sb = [UIStoryboard storyboardWithName:@"LaunchScreen" bundle:nil];\n  UIViewController *vc = [sb instantiateInitialViewController];\n  rootView.loadingView = vc.view;\n')),(0,r.kt)("p",null,"The static bundle is built every time you target a physical device, even in Debug. If you want to save time, turn off bundle generation in Debug by adding the following to your shell script in the Xcode Build Phase ",(0,r.kt)("inlineCode",{parentName:"p"},"Bundle React Native code and images"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",u({parentName:"pre"},{className:"language-sh"}),' if [ "${CONFIGURATION}" == "Debug" ]; then\n  export SKIP_BUNDLING=true\n fi\n')),(0,r.kt)("h3",u({},{id:"3-\u7f16\u8bd1\u53d1\u5e03-app"}),"3. \u7f16\u8bd1\u53d1\u5e03 app"),(0,r.kt)("p",null,"\u73b0\u5728\u53ef\u4ee5\u901a\u8fc7\u70b9\u51fb",(0,r.kt)("inlineCode",{parentName:"p"},"\u2318B"),"\u6216\u4ece\u83dc\u5355\u680f\u9009\u62e9 ",(0,r.kt)("strong",{parentName:"p"},"Product")," \u2192 ",(0,r.kt)("strong",{parentName:"p"},"Build")," \u7f16\u8bd1\u53d1\u5e03 app\u3002\u4e00\u65e6\u7f16\u8bd1\u53d1\u5e03\uff0c\u5c31\u80fd\u591f\u5411 beta \u6d4b\u8bd5\u8005\u53d1\u5e03 app\uff0c\u63d0\u4ea4 app \u5230 App Store\u3002"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"You can also use the ",(0,r.kt)("inlineCode",{parentName:"p"},"React Native CLI")," to perform this operation using the option ",(0,r.kt)("inlineCode",{parentName:"p"},"--configuration")," with the value ",(0,r.kt)("inlineCode",{parentName:"p"},"Release")," (e.g. ",(0,r.kt)("inlineCode",{parentName:"p"},"npx react-native run-ios --configuration Release"),").")))}y.isMDXComponent=!0},84217:(e,t,n)=>{n.d(t,{Z:()=>r});const r=n.p+"assets/images/ConfigureReleaseScheme-68e17e8d9a2cf2b73adb47865b45399d.png"}}]);