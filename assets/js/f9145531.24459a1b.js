"use strict";(self.webpackChunkreact_native_website=self.webpackChunkreact_native_website||[]).push([[21875],{35318:function(e,t,n){n.d(t,{Zo:function(){return u},kt:function(){return v}});var a=n(27378);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s=a.createContext({}),c=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},u=function(e){var t=c(e.components);return a.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},p=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,i=e.originalType,s=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),p=c(n),v=o,f=p["".concat(s,".").concat(v)]||p[v]||d[v]||i;return n?a.createElement(f,r(r({ref:t},u),{},{components:n})):a.createElement(f,r({ref:t},u))}));function v(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var i=n.length,r=new Array(i);r[0]=p;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:o,r[1]=l;for(var c=2;c<i;c++)r[c]=n[c];return a.createElement.apply(null,r)}return a.createElement.apply(null,n)}p.displayName="MDXCreateElement"},45981:function(e,t,n){var a=n(161),o=!!a.Z.canUseDOM&&navigator.platform.startsWith("Mac"),i=!!a.Z.canUseDOM&&navigator.platform.startsWith("Win"),r=o?"ios":"android",l=o?"macos":i?"windows":"linux";t.Z={defaultGuide:"native",defaultOs:l,defaultPackageManager:"npm",defaultPlatform:r,defaultSyntax:"functional",getDevNotesTabs:function(e){return void 0===e&&(e=["android","ios","web","windows"]),[e.includes("android")?{label:"Android",value:"android"}:void 0,e.includes("ios")?{label:"iOS",value:"ios"}:void 0,e.includes("web")?{label:"Web",value:"web"}:void 0,e.includes("windows")?{label:"Windows",value:"windows"}:void 0].filter(Boolean)},guides:[{label:"\u5b8c\u6574\u539f\u751f\u73af\u5883",value:"native"},{label:"\u7b80\u6613\u6c99\u76d2\u73af\u5883",value:"quickstart"}],oses:[{label:"macOS",value:"macos"},{label:"Windows",value:"windows"},{label:"Linux",value:"linux"}],packageManagers:[{label:"npm",value:"npm"},{label:"Yarn",value:"yarn"}],platforms:[{label:"Android",value:"android"},{label:"iOS",value:"ios"}],syntax:[{label:"\u51fd\u6570\u5f0f\u7ec4\u4ef6",value:"functional"},{label:"Class \u7ec4\u4ef6",value:"classical"}]}},70517:function(e,t,n){var a=n(27378);t.Z=function(e){var t=e.children,n=e.hidden,o=e.className;return a.createElement("div",{role:"tabpanel",hidden:n,className:o},t)}},64535:function(e,t,n){n.d(t,{Z:function(){return d}});var a=n(27378),o=n(84956);var i=function(){var e=(0,a.useContext)(o.Z);if(null==e)throw new Error('"useUserPreferencesContext" is used outside of "Layout" component.');return e},r=n(38944),l="tabItem_c0e5",s="tabItemActive_28AG";var c=37,u=39;var d=function(e){var t=e.lazy,n=e.block,o=e.defaultValue,d=e.values,p=e.groupId,v=e.className,f=i(),m=f.tabGroupChoices,g=f.setTabGroupChoices,h=(0,a.useState)(o),b=h[0],y=h[1],k=a.Children.toArray(e.children),w=[];if(null!=p){var C=m[p];null!=C&&C!==b&&d.some((function(e){return e.value===C}))&&y(C)}var N=function(e){var t=e.currentTarget,n=w.indexOf(t),a=d[n].value;y(a),null!=p&&(g(p,a),setTimeout((function(){var e,n,a,o,i,r,l,c;(e=t.getBoundingClientRect(),n=e.top,a=e.left,o=e.bottom,i=e.right,r=window,l=r.innerHeight,c=r.innerWidth,n>=0&&i<=c&&o<=l&&a>=0)||(t.scrollIntoView({block:"center",behavior:"smooth"}),t.classList.add(s),setTimeout((function(){return t.classList.remove(s)}),2e3))}),150))},T=function(e){var t,n;switch(e.keyCode){case u:var a=w.indexOf(e.target)+1;n=w[a]||w[0];break;case c:var o=w.indexOf(e.target)-1;n=w[o]||w[w.length-1]}null==(t=n)||t.focus()};return a.createElement("div",{className:"tabs-container"},a.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.Z)("tabs",{"tabs--block":n},v)},d.map((function(e){var t=e.value,n=e.label;return a.createElement("li",{role:"tab",tabIndex:b===t?0:-1,"aria-selected":b===t,className:(0,r.Z)("tabs__item",l,{"tabs__item--active":b===t}),key:t,ref:function(e){return w.push(e)},onKeyDown:T,onFocus:N,onClick:N},n)}))),t?(0,a.cloneElement)(k.filter((function(e){return e.props.value===b}))[0],{className:"margin-vert--md"}):a.createElement("div",{className:"margin-vert--md"},k.map((function(e,t){return(0,a.cloneElement)(e,{key:t,hidden:e.props.value!==b})}))))}},84956:function(e,t,n){var a=(0,n(27378).createContext)(void 0);t.Z=a},1078:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return l},contentTitle:function(){return s},metadata:function(){return c},toc:function(){return u},default:function(){return p}});var a=n(25773),o=n(30808),i=(n(27378),n(35318)),r=(n(64535),n(70517),n(45981),["components"]),l={id:"roottag",title:"RootTag"},s=void 0,c={unversionedId:"roottag",id:"roottag",isDocsHomePage:!1,title:"RootTag",description:"RootTag is an opaque identifier assigned to the native root view of your React Native surface \u2014 i.e. the ReactRootView or RCTRootView instance for Android or iOS respectively. In short, it is a surface identifier.",source:"@site/../cndocs/roottag.md",sourceDirName:".",slug:"/roottag",permalink:"/docs/next/roottag",editUrl:"https://github.com/reactnativecn/react-native-website/blob/production/cnwebsite/../cndocs/roottag.md",version:"current",frontMatter:{id:"roottag",title:"RootTag"},sidebar:"api",previous:{title:"PlatformColor",permalink:"/docs/next/platformcolor"},next:{title:"Share",permalink:"/docs/next/share"}},u=[{value:"When to use a RootTag?",id:"when-to-use-a-roottag",children:[]},{value:"How to access the RootTag... if you need it",id:"how-to-access-the-roottag-if-you-need-it",children:[{value:"Breaking Change in 0.65",id:"breaking-change-in-065",children:[]},{value:"Breaking Change in 0.66",id:"breaking-change-in-066",children:[]}]},{value:"Future Plans",id:"future-plans",children:[]}],d={toc:u};function p(e){var t=e.components,n=(0,o.Z)(e,r);return(0,i.kt)("wrapper",(0,a.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"RootTag")," is an opaque identifier assigned to the native root view of your React Native surface \u2014 i.e. the ",(0,i.kt)("inlineCode",{parentName:"p"},"ReactRootView")," or ",(0,i.kt)("inlineCode",{parentName:"p"},"RCTRootView")," instance for Android or iOS respectively. In short, it is a surface identifier."),(0,i.kt)("h2",{id:"when-to-use-a-roottag"},"When to use a RootTag?"),(0,i.kt)("p",null,"For most React Native developers, you likely won\u2019t need to deal with ",(0,i.kt)("inlineCode",{parentName:"p"},"RootTag"),"s."),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"RootTag"),"s are useful for when an app renders ",(0,i.kt)("strong",{parentName:"p"},"multiple React Native root views")," and you need to handle native API calls differently depending on the surface. An example of this is when an app is using native navigation and each screen is a separate React Native root view."),(0,i.kt)("p",null,"In native navigation, every React Native root view is rendered in a platform\u2019s navigation view (e.g., ",(0,i.kt)("inlineCode",{parentName:"p"},"Activity")," for Android, ",(0,i.kt)("inlineCode",{parentName:"p"},"UINavigationViewController")," for iOS). By this, you are able to leverage the navigation paradigms of the platform such as native look and feel and navigation transitions. The functionality to interact with the native navigation APIs can be exposed to React Native via a ",(0,i.kt)("a",{parentName:"p",href:"https://reactnative.dev/docs/next/native-modules-intro"},"native module"),"."),(0,i.kt)("p",null,"For example, to update the title bar of a screen, you would call the navigation module\u2019s API ",(0,i.kt)("inlineCode",{parentName:"p"},'setTitle("Updated Title")'),", but it would need to know which screen in the stack to update. A ",(0,i.kt)("inlineCode",{parentName:"p"},"RootTag")," is necessary here to identify the root view and its hosting container."),(0,i.kt)("p",null,"Another use case for ",(0,i.kt)("inlineCode",{parentName:"p"},"RootTag")," is when your app needs to attribute a certain JavaScript call to native based on its originating root view. A ",(0,i.kt)("inlineCode",{parentName:"p"},"RootTag")," is necessary to differentiate the source of the call from different surfaces."),(0,i.kt)("h2",{id:"how-to-access-the-roottag-if-you-need-it"},"How to access the RootTag... if you need it"),(0,i.kt)("p",null,"In versions 0.65 and below, RootTag is accessed via a ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/facebook/react-native/blob/v0.64.1/Libraries/ReactNative/AppContainer.js#L56"},"legacy context"),". To prepare React Native for Concurrent features coming in React 18 and beyond, we are migrating to the latest ",(0,i.kt)("a",{parentName:"p",href:"https://reactjs.org/docs/context.html#api"},"Context API")," via ",(0,i.kt)("inlineCode",{parentName:"p"},"RootTagContext")," in 0.66. Version 0.65 supports both the legacy context and the recommended ",(0,i.kt)("inlineCode",{parentName:"p"},"RootTagContext")," to allow developers time to migrate their call-sites. See the breaking changes summary."),(0,i.kt)("p",null,"How to access ",(0,i.kt)("inlineCode",{parentName:"p"},"RootTag")," via the ",(0,i.kt)("inlineCode",{parentName:"p"},"RootTagContext"),"."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"import { RootTagContext } from 'react-native';\nimport NativeAnalytics from 'native-analytics';\nimport NativeNavigation from 'native-navigation';\n\nfunction ScreenA() {\n  const rootTag = useContext(RootTagContext);\n\n  const updateTitle = (title) => {\n    NativeNavigation.setTitle(rootTag, title);\n  };\n\n  const handleOneEvent = () => {\n    NativeAnalytics.logEvent(rootTag, 'one_event');\n  };\n\n  // ...\n}\n\nclass ScreenB extends React.Component {\n  static contextType: typeof RootTagContext = RootTagContext;\n\n  updateTitle(title) {\n    NativeNavigation.setTitle(this.context, title);\n  }\n\n  handleOneEvent() {\n    NativeAnalytics.logEvent(this.context, 'one_event');\n  }\n\n  // ...\n}\n")),(0,i.kt)("p",null,"Learn more about the Context API for ",(0,i.kt)("a",{parentName:"p",href:"https://reactjs.org/docs/context.html#classcontexttype"},"classes")," and ",(0,i.kt)("a",{parentName:"p",href:"https://reactjs.org/docs/hooks-reference.html#usecontext"},"hooks")," from the React docs."),(0,i.kt)("h3",{id:"breaking-change-in-065"},"Breaking Change in 0.65"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"RootTagContext")," was formerly named ",(0,i.kt)("inlineCode",{parentName:"p"},"unstable_RootTagContext")," and changed to ",(0,i.kt)("inlineCode",{parentName:"p"},"RootTagContext")," in 0.65. Please update any usages of ",(0,i.kt)("inlineCode",{parentName:"p"},"unstable_RootTagContext")," in your codebase."),(0,i.kt)("h3",{id:"breaking-change-in-066"},"Breaking Change in 0.66"),(0,i.kt)("p",null,"The legacy context access to ",(0,i.kt)("inlineCode",{parentName:"p"},"RootTag")," will be removed and replaced by ",(0,i.kt)("inlineCode",{parentName:"p"},"RootTagContext"),". Beginning in 0.65, we encourage developers to proactively migrate ",(0,i.kt)("inlineCode",{parentName:"p"},"RootTag")," accesses to ",(0,i.kt)("inlineCode",{parentName:"p"},"RootTagContext"),"."),(0,i.kt)("h2",{id:"future-plans"},"Future Plans"),(0,i.kt)("p",null,"With the new React Native architecture progressing, there will be future iterations to ",(0,i.kt)("inlineCode",{parentName:"p"},"RootTag"),", with the intention to keep the ",(0,i.kt)("inlineCode",{parentName:"p"},"RootTag")," type opaque and prevent thrash in React Native codebases. Please do not rely on the fact that RootTag currently aliases to a number! If your app relies on RootTags, keep an eye on our version change logs, which you can find ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/react-native-community/releases/blob/master/CHANGELOG.md"},"here"),"."))}p.isMDXComponent=!0}}]);