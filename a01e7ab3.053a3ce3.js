(window.webpackJsonp=window.webpackJsonp||[]).push([[318],{584:function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return u}));var a=n(0),i=n.n(a);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var A=i.a.createContext({}),p=function(e){var t=i.a.useContext(A),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},b=function(e){var t=p(e.components);return i.a.createElement(A.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return i.a.createElement(i.a.Fragment,{},t)}},s=i.a.forwardRef((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,c=e.parentName,A=l(e,["components","mdxType","originalType","parentName"]),b=p(n),s=a,u=b["".concat(c,".").concat(s)]||b[s]||d[s]||r;return n?i.a.createElement(u,o(o({ref:t},A),{},{components:n})):i.a.createElement(u,o({ref:t},A))}));function u(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,c=new Array(r);c[0]=s;var o={};for(var l in t)hasOwnProperty.call(t,l)&&(o[l]=t[l]);o.originalType=e,o.mdxType="string"==typeof e?e:a,c[1]=o;for(var A=2;A<r;A++)c[A]=n[A];return i.a.createElement.apply(null,c)}return i.a.createElement.apply(null,n)}s.displayName="MDXCreateElement"},600:function(e,t,n){"use strict";n.r(t),t.default="data:image/png;base64,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"},70:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return c})),n.d(t,"metadata",(function(){return o})),n.d(t,"toc",(function(){return l})),n.d(t,"default",(function(){return p}));var a=n(3),i=n(8),r=(n(0),n(584)),c={},o={unversionedId:"_integration-with-exisiting-apps-java",id:"version-0.64/_integration-with-exisiting-apps-java",isDocsHomePage:!1,title:"_integration-with-exisiting-apps-java",description:"\u6838\u5fc3\u6982\u5ff5",source:"@site/versioned_docs/version-0.64/_integration-with-exisiting-apps-java.md",slug:"/_integration-with-exisiting-apps-java",permalink:"/docs/_integration-with-exisiting-apps-java",editUrl:"https://github.com/reactnativecn/react-native-website/blob/production/cnwebsite/versioned_docs/version-0.64/_integration-with-exisiting-apps-java.md",version:"0.64",lastUpdatedAt:1625457339},l=[{value:"\u6838\u5fc3\u6982\u5ff5",id:"\u6838\u5fc3\u6982\u5ff5",children:[]},{value:"\u5f00\u53d1\u73af\u5883\u51c6\u5907",id:"\u5f00\u53d1\u73af\u5883\u51c6\u5907",children:[{value:"1. \u914d\u7f6e\u9879\u76ee\u76ee\u5f55\u7ed3\u6784",id:"1-\u914d\u7f6e\u9879\u76ee\u76ee\u5f55\u7ed3\u6784",children:[]},{value:"2. \u5b89\u88c5 JavaScript \u4f9d\u8d56\u5305",id:"2-\u5b89\u88c5-javascript-\u4f9d\u8d56\u5305",children:[]}]},{value:"\u628a React Native \u6dfb\u52a0\u5230\u4f60\u7684\u5e94\u7528\u4e2d",id:"\u628a-react-native-\u6dfb\u52a0\u5230\u4f60\u7684\u5e94\u7528\u4e2d",children:[{value:"\u914d\u7f6e maven",id:"\u914d\u7f6e-maven",children:[]},{value:"\u542f\u7528\u539f\u751f\u6a21\u5757\u7684\u81ea\u52a8\u94fe\u63a5",id:"\u542f\u7528\u539f\u751f\u6a21\u5757\u7684\u81ea\u52a8\u94fe\u63a5",children:[]},{value:"\u914d\u7f6e\u6743\u9650",id:"\u914d\u7f6e\u6743\u9650",children:[]},{value:"\u5141\u8bb8\u660e\u6587\u4f20\u8f93\uff08http \u63a5\u53e3\uff09 (API level 28+)",id:"\u5141\u8bb8\u660e\u6587\u4f20\u8f93\uff08http-\u63a5\u53e3\uff09-api-level-28",children:[]},{value:"\u4ee3\u7801\u96c6\u6210",id:"\u4ee3\u7801\u96c6\u6210",children:[]},{value:"\u6d4b\u8bd5\u96c6\u6210\u7ed3\u679c",id:"\u6d4b\u8bd5\u96c6\u6210\u7ed3\u679c",children:[]},{value:"\u5728 Android Studio \u4e2d\u6253\u5305",id:"\u5728-android-studio-\u4e2d\u6253\u5305",children:[]},{value:"\u7136\u540e\u5462\uff1f",id:"\u7136\u540e\u5462\uff1f",children:[]}]}],A={toc:l};function p(e){var t=e.components,c=Object(i.a)(e,["components"]);return Object(r.b)("wrapper",Object(a.a)({},A,c,{components:t,mdxType:"MDXLayout"}),Object(r.b)("h2",{id:"\u6838\u5fc3\u6982\u5ff5"},"\u6838\u5fc3\u6982\u5ff5"),Object(r.b)("p",null,"\u628a React Native \u7ec4\u4ef6\u96c6\u6210\u5230 Android \u5e94\u7528\u4e2d\u6709\u5982\u4e0b\u51e0\u4e2a\u4e3b\u8981\u6b65\u9aa4\uff1a"),Object(r.b)("ol",null,Object(r.b)("li",{parentName:"ol"},"\u914d\u7f6e\u597d React Native \u4f9d\u8d56\u548c\u9879\u76ee\u7ed3\u6784\u3002"),Object(r.b)("li",{parentName:"ol"},"\u521b\u5efa js \u6587\u4ef6\uff0c\u7f16\u5199 React Native \u7ec4\u4ef6\u7684 js \u4ee3\u7801\u3002"),Object(r.b)("li",{parentName:"ol"},"\u5728\u5e94\u7528\u4e2d\u6dfb\u52a0\u4e00\u4e2a",Object(r.b)("inlineCode",{parentName:"li"},"ReactRootView"),"\u3002\u8fd9\u4e2a",Object(r.b)("inlineCode",{parentName:"li"},"ReactRootView"),"\u6b63\u662f\u7528\u6765\u627f\u8f7d\u4f60\u7684 React Native \u7ec4\u4ef6\u7684\u5bb9\u5668\u3002"),Object(r.b)("li",{parentName:"ol"},"\u542f\u52a8 React Native \u7684 Metro \u670d\u52a1\uff0c\u8fd0\u884c\u5e94\u7528\u3002"),Object(r.b)("li",{parentName:"ol"},"\u9a8c\u8bc1\u8fd9\u90e8\u5206\u7ec4\u4ef6\u662f\u5426\u6b63\u5e38\u5de5\u4f5c\u3002")),Object(r.b)("h2",{id:"\u5f00\u53d1\u73af\u5883\u51c6\u5907"},"\u5f00\u53d1\u73af\u5883\u51c6\u5907"),Object(r.b)("p",null,"\u9996\u5148\u6309\u7167",Object(r.b)("a",{parentName:"p",href:"environment-setup"},"\u5f00\u53d1\u73af\u5883\u642d\u5efa\u6559\u7a0b"),"\u6765\u5b89\u88c5 React Native \u5728 Android \u5e73\u53f0\u4e0a\u6240\u9700\u7684\u4e00\u5207\u4f9d\u8d56\u8f6f\u4ef6\u3002"),Object(r.b)("h3",{id:"1-\u914d\u7f6e\u9879\u76ee\u76ee\u5f55\u7ed3\u6784"},"1. \u914d\u7f6e\u9879\u76ee\u76ee\u5f55\u7ed3\u6784"),Object(r.b)("p",null,"\u9996\u5148\u521b\u5efa\u4e00\u4e2a\u7a7a\u76ee\u5f55\u7528\u4e8e\u5b58\u653e React Native \u9879\u76ee\uff0c\u7136\u540e\u5728\u5176\u4e2d\u521b\u5efa\u4e00\u4e2a",Object(r.b)("inlineCode",{parentName:"p"},"/android"),"\u5b50\u76ee\u5f55\uff0c\u628a\u4f60\u73b0\u6709\u7684 Android \u9879\u76ee\u62f7\u8d1d\u5230",Object(r.b)("inlineCode",{parentName:"p"},"/android"),"\u5b50\u76ee\u5f55\u4e2d\u3002"),Object(r.b)("h3",{id:"2-\u5b89\u88c5-javascript-\u4f9d\u8d56\u5305"},"2. \u5b89\u88c5 JavaScript \u4f9d\u8d56\u5305"),Object(r.b)("p",null,"\u5728\u9879\u76ee\u6839\u76ee\u5f55\u4e0b\u521b\u5efa\u4e00\u4e2a\u540d\u4e3a",Object(r.b)("inlineCode",{parentName:"p"},"package.json"),"\u7684\u7a7a\u6587\u672c\u6587\u4ef6\uff0c\u7136\u540e\u586b\u5165\u4ee5\u4e0b\u5185\u5bb9\uff1a"),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre"},'{\n  "name": "MyReactNativeApp",\n  "version": "0.0.1",\n  "private": true,\n  "scripts": {\n    "start": "yarn react-native start"\n  }\n}\n')),Object(r.b)("blockquote",null,Object(r.b)("p",{parentName:"blockquote"},"\u793a\u4f8b\u4e2d\u7684",Object(r.b)("inlineCode",{parentName:"p"},"version"),"\u5b57\u6bb5\u6ca1\u6709\u592a\u5927\u610f\u4e49\uff08\u9664\u975e\u4f60\u8981\u628a\u4f60\u7684\u9879\u76ee\u53d1\u5e03\u5230 npm \u4ed3\u5e93\uff09\u3002",Object(r.b)("inlineCode",{parentName:"p"},"scripts"),"\u4e2d\u662f\u7528\u4e8e\u542f\u52a8 Metro \u670d\u52a1\u7684\u547d\u4ee4\u3002")),Object(r.b)("p",null,"\u63a5\u4e0b\u6765\u6211\u4eec\u4f7f\u7528 yarn \u6216 npm\uff08\u4e24\u8005\u90fd\u662f node \u7684\u5305\u7ba1\u7406\u5668\uff09\u6765\u5b89\u88c5 React \u548c React Native \u6a21\u5757\u3002\u8bf7\u6253\u5f00\u4e00\u4e2a\u7ec8\u7aef/\u547d\u4ee4\u63d0\u793a\u884c\uff0c\u8fdb\u5165\u5230\u9879\u76ee\u76ee\u5f55\u4e2d\uff08\u5373\u5305\u542b\u6709 package.json \u6587\u4ef6\u7684\u76ee\u5f55\uff09\uff0c\u7136\u540e\u8fd0\u884c\u4e0b\u5217\u547d\u4ee4\u6765\u5b89\u88c5\uff1a"),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-shell"},"$ yarn add react-native\n")),Object(r.b)("p",null,"\u8fd9\u6837\u9ed8\u8ba4\u4f1a\u5b89\u88c5\u6700\u65b0\u7248\u672c\u7684 React Native\uff0c\u540c\u65f6\u4f1a\u6253\u5370\u51fa\u7c7b\u4f3c\u4e0b\u9762\u7684\u8b66\u544a\u4fe1\u606f\uff08\u4f60\u53ef\u80fd\u9700\u8981\u6eda\u52a8\u5c4f\u5e55\u624d\u80fd\u6ce8\u610f\u5230\uff09\uff1a"),Object(r.b)("blockquote",null,Object(r.b)("p",{parentName:"blockquote"},'warning "',Object(r.b)("a",{parentName:"p",href:"mailto:react-native@0.52.2"},"react-native@0.52.2"),'" has unmet peer dependency "',Object(r.b)("a",{parentName:"p",href:"mailto:react@16.2.0"},"react@16.2.0"),'".')),Object(r.b)("p",null,"\u8fd9\u662f\u6b63\u5e38\u73b0\u8c61\uff0c\u610f\u5473\u7740\u6211\u4eec\u8fd8\u9700\u8981\u5b89\u88c5\u6307\u5b9a\u7248\u672c\u7684 React\uff1a"),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre"},"$ yarn add react@16.2.0\n")),Object(r.b)("p",null,"\u6ce8\u610f\u5fc5\u987b\u4e25\u683c\u5339\u914d\u8b66\u544a\u4fe1\u606f\u4e2d\u6240\u5217\u51fa\u7684\u7248\u672c\uff0c\u9ad8\u4e86\u6216\u8005\u4f4e\u4e86\u90fd\u4e0d\u53ef\u4ee5\u3002"),Object(r.b)("blockquote",null,Object(r.b)("p",{parentName:"blockquote"},"\u5982\u679c\u4f60\u4f7f\u7528\u591a\u4e2a\u7b2c\u4e09\u65b9\u4f9d\u8d56\uff0c\u53ef\u80fd\u8fd9\u4e9b\u7b2c\u4e09\u65b9\u5404\u81ea\u8981\u6c42\u7684 react \u7248\u672c\u6709\u6240\u51b2\u7a81\uff0c\u6b64\u65f6\u5e94\u4f18\u5148\u6ee1\u8db3",Object(r.b)("inlineCode",{parentName:"p"},"react-native"),"\u6240\u9700\u8981\u7684",Object(r.b)("inlineCode",{parentName:"p"},"react"),"\u7248\u672c\u3002\u5176\u4ed6\u7b2c\u4e09\u65b9\u80fd\u7528\u5219\u7528\uff0c\u4e0d\u80fd\u7528\u5219\u53ea\u80fd\u8003\u8651\u9009\u62e9\u5176\u4ed6\u5e93\u3002")),Object(r.b)("p",null,"\u6240\u6709 JavaScript \u4f9d\u8d56\u6a21\u5757\u90fd\u4f1a\u88ab\u5b89\u88c5\u5230\u9879\u76ee\u6839\u76ee\u5f55\u4e0b\u7684",Object(r.b)("inlineCode",{parentName:"p"},"node_modules/"),"\u76ee\u5f55\u4e2d\uff08\u8fd9\u4e2a\u76ee\u5f55\u6211\u4eec\u539f\u5219\u4e0a\u4e0d\u590d\u5236\u3001\u4e0d\u79fb\u52a8\u3001\u4e0d\u4fee\u6539\u3001\u4e0d\u4e0a\u4f20\uff0c\u968f\u7528\u968f\u88c5\uff09\u3002"),Object(r.b)("p",null,"\u628a",Object(r.b)("inlineCode",{parentName:"p"},"node_modules/"),"\u76ee\u5f55\u8bb0\u5f55\u5230",Object(r.b)("inlineCode",{parentName:"p"},".gitignore"),"\u6587\u4ef6\u4e2d\uff08\u5373\u4e0d\u4e0a\u4f20\u5230\u7248\u672c\u63a7\u5236\u7cfb\u7edf\uff0c\u53ea\u4fdd\u7559\u5728\u672c\u5730\uff09\u3002"),Object(r.b)("h2",{id:"\u628a-react-native-\u6dfb\u52a0\u5230\u4f60\u7684\u5e94\u7528\u4e2d"},"\u628a React Native \u6dfb\u52a0\u5230\u4f60\u7684\u5e94\u7528\u4e2d"),Object(r.b)("h3",{id:"\u914d\u7f6e-maven"},"\u914d\u7f6e maven"),Object(r.b)("p",null,"\u5728\u4f60\u7684 app \u4e2d ",Object(r.b)("inlineCode",{parentName:"p"},"build.gradle")," \u6587\u4ef6\u4e2d\u6dfb\u52a0 React Native \u548c JSC \u5f15\u64ce\u4f9d\u8d56:"),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-gradle"},'dependencies {\n    implementation "com.android.support:appcompat-v7:27.1.1"\n    ...\n    implementation "com.facebook.react:react-native:+" // From node_modules\n    implementation "org.webkit:android-jsc:+"\n}\n')),Object(r.b)("blockquote",null,Object(r.b)("p",{parentName:"blockquote"},"\u5982\u679c\u60f3\u8981\u6307\u5b9a\u7279\u5b9a\u7684 React Native \u7248\u672c\uff0c\u53ef\u4ee5\u7528\u5177\u4f53\u7684\u7248\u672c\u53f7\u66ff\u6362 ",Object(r.b)("inlineCode",{parentName:"p"},"+"),"\uff0c\u5f53\u7136\u524d\u63d0\u662f\u4f60\u4ece npm \u91cc\u4e0b\u8f7d\u7684\u662f\u8fd9\u4e2a\u7248\u672c\u3002")),Object(r.b)("p",null,"\u5728\u9879\u76ee\u7684 ",Object(r.b)("inlineCode",{parentName:"p"},"build.gradle"),' \u6587\u4ef6\u4e2d\u4e3a React Native \u548c JSC \u5f15\u64ce\u6dfb\u52a0 maven \u6e90\u7684\u8def\u5f84\uff0c\u5fc5\u987b\u5199\u5728 "allprojects" \u4ee3\u7801\u5757\u4e2d'),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-gradle"},'allprojects {\n    repositories {\n        maven {\n            // All of React Native (JS, Android binaries) is installed from npm\n            url "$rootDir/../node_modules/react-native/android"\n        }\n        maven {\n            // Android JSC is installed from npm\n            url("$rootDir/../node_modules/jsc-android/dist")\n        }\n        ...\n    }\n    ...\n}\n')),Object(r.b)("blockquote",null,Object(r.b)("p",{parentName:"blockquote"},'\u786e\u4fdd\u4f9d\u8d56\u8def\u5f84\u7684\u6b63\u786e\uff01\u4ee5\u514d\u5728 Android Studio \u8fd0\u884c Gradle \u540c\u6b65\u6784\u5efa\u65f6\u629b\u51fa \u201cFailed to resolve: com.facebook.react:react-native:0.x.x" \u5f02\u5e38\u3002')),Object(r.b)("h3",{id:"\u542f\u7528\u539f\u751f\u6a21\u5757\u7684\u81ea\u52a8\u94fe\u63a5"},"\u542f\u7528\u539f\u751f\u6a21\u5757\u7684\u81ea\u52a8\u94fe\u63a5"),Object(r.b)("p",null,"To use the power of ",Object(r.b)("a",{parentName:"p",href:"https://github.com/react-native-community/cli/blob/master/docs/autolinking.md"},"autolinking"),", we have to apply it a few places. First add the following entry to ",Object(r.b)("inlineCode",{parentName:"p"},"settings.gradle"),":"),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-gradle"},'apply from: file("../node_modules/@react-native-community/cli-platform-android/native_modules.gradle"); applyNativeModulesSettingsGradle(settings)\n')),Object(r.b)("p",null,"Next add the following entry at the very bottom of the ",Object(r.b)("inlineCode",{parentName:"p"},"app/build.gradle"),":"),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-gradle"},'apply from: file("../../node_modules/@react-native-community/cli-platform-android/native_modules.gradle"); applyNativeModulesAppBuildGradle(project)\n')),Object(r.b)("h3",{id:"\u914d\u7f6e\u6743\u9650"},"\u914d\u7f6e\u6743\u9650"),Object(r.b)("p",null,"\u63a5\u7740\uff0c\u5728 ",Object(r.b)("inlineCode",{parentName:"p"},"AndroidManifest.xml")," \u6e05\u5355\u6587\u4ef6\u4e2d\u58f0\u660e\u7f51\u7edc\u6743\u9650:"),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre"},'<uses-permission android:name="android.permission.INTERNET" />\n')),Object(r.b)("p",null,"\u5982\u679c\u9700\u8981\u8bbf\u95ee ",Object(r.b)("inlineCode",{parentName:"p"},"DevSettingsActivity")," \u754c\u9762\uff08\u5373\u5f00\u53d1\u8005\u83dc\u5355\uff09\uff0c\u5219\u8fd8\u9700\u8981\u5728 ",Object(r.b)("inlineCode",{parentName:"p"},"AndroidManifest.xml")," \u4e2d\u58f0\u660e:"),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre"},'<activity android:name="com.facebook.react.devsupport.DevSettingsActivity" />\n')),Object(r.b)("p",null,"\u5f00\u53d1\u8005\u83dc\u5355\u4e00\u822c\u4ec5\u7528\u4e8e\u5728\u5f00\u53d1\u65f6\u4ece Packager \u670d\u52a1\u5668\u5237\u65b0 JavaScript \u4ee3\u7801\uff0c\u6240\u4ee5\u5728\u6b63\u5f0f\u53d1\u5e03\u65f6\u4f60\u53ef\u4ee5\u53bb\u6389\u8fd9\u4e00\u6743\u9650\u3002"),Object(r.b)("h3",{id:"\u5141\u8bb8\u660e\u6587\u4f20\u8f93\uff08http-\u63a5\u53e3\uff09-api-level-28"},"\u5141\u8bb8\u660e\u6587\u4f20\u8f93\uff08http \u63a5\u53e3\uff09 (API level 28+)"),Object(r.b)("blockquote",null,Object(r.b)("p",{parentName:"blockquote"},"\u4ece Android 9 (API level 28)\u5f00\u59cb\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u660e\u6587\u4f20\u8f93\uff08http \u63a5\u53e3\uff09\u662f\u7981\u7528\u7684\uff0c\u53ea\u80fd\u8bbf\u95ee https \u63a5\u53e3\u3002 this prevents your application from connecting to the ","[Metro bundler][metro]",". The changes below allow cleartext traffic in debug builds.")),Object(r.b)("h4",{id:"1-\u4e3a-debug-\u7248\u672c\u542f\u7528-usescleartexttraffic\u9009\u9879"},"1. \u4e3a debug \u7248\u672c\u542f\u7528 ",Object(r.b)("inlineCode",{parentName:"h4"},"usesCleartextTraffic"),"\u9009\u9879"),Object(r.b)("p",null,"\u5728",Object(r.b)("inlineCode",{parentName:"p"},"src/debug/AndroidManifest.xml"),"\u4e2d\u6dfb\u52a0",Object(r.b)("inlineCode",{parentName:"p"},"usesCleartextTraffic"),"\u9009\u9879\uff1a"),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-xml"},'\x3c!-- ... --\x3e\n<application\n  android:usesCleartextTraffic="true" tools:targetApi="28" >\n  \x3c!-- ... --\x3e\n</application>\n\x3c!-- ... --\x3e\n')),Object(r.b)("p",null,"\u5982\u679c\u5e0c\u671b\u5728\u6b63\u5f0f\u6253\u5305\u540e\u4e5f\u80fd\u7ee7\u7eed\u8bbf\u95ee http \u63a5\u53e3\uff0c\u5219\u9700\u8981\u5728",Object(r.b)("inlineCode",{parentName:"p"},"src/main/AndroidManifest.xml"),"\u4e2d\u4e5f\u6dfb\u52a0\u8fd9\u4e00\u9009\u9879\u3002"),Object(r.b)("p",null,"To learn more about Network Security Config and the cleartext traffic policy ",Object(r.b)("a",{parentName:"p",href:"https://developer.android.com/training/articles/security-config#CleartextTrafficPermitted"},"see this link"),"."),Object(r.b)("h3",{id:"\u4ee3\u7801\u96c6\u6210"},"\u4ee3\u7801\u96c6\u6210"),Object(r.b)("p",null,"Now we will actually modify the native Android application to integrate React Native."),Object(r.b)("h4",{id:"react-native-\u7ec4\u4ef6"},"React Native \u7ec4\u4ef6"),Object(r.b)("p",null,'\u6211\u4eec\u9996\u5148\u8981\u5199\u7684\u662f"High Score"\uff08\u5f97\u5206\u6392\u884c\u699c\uff09\u7684 JavaScript \u7aef\u7684\u4ee3\u7801\u3002'),Object(r.b)("h5",{id:"1-\u521b\u5efa\u4e00\u4e2aindexjs\u6587\u4ef6"},"1. \u521b\u5efa\u4e00\u4e2a",Object(r.b)("inlineCode",{parentName:"h5"},"index.js"),"\u6587\u4ef6"),Object(r.b)("p",null,"\u9996\u5148\u5728\u9879\u76ee\u6839\u76ee\u5f55\u4e2d\u521b\u5efa\u4e00\u4e2a\u7a7a\u7684",Object(r.b)("inlineCode",{parentName:"p"},"index.js"),"\u6587\u4ef6\u3002(\u6ce8\u610f\u4e00\u4e9b\u8001\u7684\u6559\u7a0b\u53ef\u80fd\u63d0\u5230\uff0c\u5728 0.49 \u7248\u672c\u4e4b\u524d\u662f index.android.js \u6587\u4ef6)"),Object(r.b)("p",null,Object(r.b)("inlineCode",{parentName:"p"},"index.js"),"\u662f React Native \u5e94\u7528\u5728 Android \u4e0a\u7684\u5165\u53e3\u6587\u4ef6\u3002\u800c\u4e14\u5b83\u662f\u4e0d\u53ef\u6216\u7f3a\u7684\uff01\u5b83\u53ef\u4ee5\u662f\u4e2a\u5f88\u7b80\u5355\u7684\u6587\u4ef6\uff0c\u7b80\u5355\u5230\u53ef\u4ee5\u53ea\u5305\u542b\u4e00\u884c",Object(r.b)("inlineCode",{parentName:"p"},"require/import"),"\u5bfc\u5165\u8bed\u53e5\u3002\u672c\u6559\u7a0b\u4e2d\u4e3a\u4e86\u7b80\u5355\u793a\u8303\uff0c\u628a\u5168\u90e8\u7684\u4ee3\u7801\u90fd\u5199\u5230\u4e86",Object(r.b)("inlineCode",{parentName:"p"},"index.js"),"\u91cc\uff08\u5f53\u7136\u5b9e\u9645\u5f00\u53d1\u4e2d\u6211\u4eec\u5e76\u4e0d\u63a8\u8350\u8fd9\u6837\u505a\uff09\u3002"),Object(r.b)("h5",{id:"2-\u6dfb\u52a0\u4f60\u81ea\u5df1\u7684-react-native-\u4ee3\u7801"},"2. \u6dfb\u52a0\u4f60\u81ea\u5df1\u7684 React Native \u4ee3\u7801"),Object(r.b)("p",null,"\u5728",Object(r.b)("inlineCode",{parentName:"p"},"index.js"),"\u4e2d\u6dfb\u52a0\u4f60\u81ea\u5df1\u7684\u7ec4\u4ef6\u3002\u8fd9\u91cc\u6211\u4eec\u53ea\u662f\u7b80\u5355\u7684\u6dfb\u52a0\u4e00\u4e2a",Object(r.b)("inlineCode",{parentName:"p"},"<Text>"),"\u7ec4\u4ef6\uff0c\u7136\u540e\u7528\u4e00\u4e2a\u5e26\u6709\u6837\u5f0f\u7684",Object(r.b)("inlineCode",{parentName:"p"},"<View>"),"\u7ec4\u4ef6\u628a\u5b83\u5305\u8d77\u6765\u3002"),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-jsx"},"import React from 'react';\nimport {\n  AppRegistry,\n  StyleSheet,\n  Text,\n  View\n} from 'react-native';\n\nclass HelloWorld extends React.Component {\n  render() {\n    return (\n      <View style={styles.container}>\n        <Text style={styles.hello}>Hello, World</Text>\n      </View>\n    );\n  }\n}\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    justifyContent: 'center'\n  },\n  hello: {\n    fontSize: 20,\n    textAlign: 'center',\n    margin: 10\n  }\n});\n\nAppRegistry.registerComponent(\n  'MyReactNativeApp',\n  () => HelloWorld\n);\n")),Object(r.b)("h5",{id:"3-\u914d\u7f6e\u6743\u9650\u4ee5\u4fbf\u5f00\u53d1\u4e2d\u7684\u7ea2\u5c4f\u9519\u8bef\u80fd\u6b63\u786e\u663e\u793a"},"3. \u914d\u7f6e\u6743\u9650\u4ee5\u4fbf\u5f00\u53d1\u4e2d\u7684\u7ea2\u5c4f\u9519\u8bef\u80fd\u6b63\u786e\u663e\u793a"),Object(r.b)("p",null,"\u5982\u679c\u4f60\u7684\u5e94\u7528\u4f1a\u8fd0\u884c\u5728 Android 6.0\uff08API level 23\uff09\u6216\u66f4\u9ad8\u7248\u672c\uff0c\u8bf7\u786e\u4fdd\u4f60\u5728\u5f00\u53d1\u7248\u672c\u4e2d\u6709\u6253\u5f00",Object(r.b)("inlineCode",{parentName:"p"},"\u60ac\u6d6e\u7a97(overlay)"),"\u6743\u9650\u3002\u4f60\u53ef\u4ee5\u5728\u4ee3\u7801\u4e2d\u4f7f\u7528",Object(r.b)("inlineCode",{parentName:"p"},"Settings.canDrawOverlays(this);"),"\u6765\u68c0\u67e5\u3002\u4e4b\u6240\u4ee5\u9700\u8981\u8fd9\u4e00\u6743\u9650\uff0c\u662f\u56e0\u4e3a\u6211\u4eec\u4f1a\u628a\u5f00\u53d1\u4e2d\u7684\u62a5\u9519\u663e\u793a\u5728\u60ac\u6d6e\u7a97\u4e2d\uff08\u4ec5\u5728\u5f00\u53d1\u9636\u6bb5\u9700\u8981\uff09\u3002\u5728 Android 6.0\uff08API level 23\uff09\u4e2d\u7528\u6237\u9700\u8981\u624b\u52a8\u540c\u610f\u6388\u6743\u3002\u5177\u4f53\u8bf7\u6c42\u6388\u6743\u7684\u505a\u6cd5\u662f\u5728",Object(r.b)("inlineCode",{parentName:"p"},"onCreate()"),"\u4e2d\u6dfb\u52a0\u5982\u4e0b\u4ee3\u7801\u3002\u5176\u4e2d",Object(r.b)("inlineCode",{parentName:"p"},"OVERLAY_PERMISSION_REQ_CODE"),"\u662f\u7528\u4e8e\u56de\u4f20\u6388\u6743\u7ed3\u679c\u7684\u5b57\u6bb5\u3002"),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-java"},'private final int OVERLAY_PERMISSION_REQ_CODE = 1;  // \u4efb\u5199\u4e00\u4e2a\u503c\n\n...\n\nif (Build.VERSION.SDK_INT >= Build.VERSION_CODES.M) {\n    if (!Settings.canDrawOverlays(this)) {\n        Intent intent = new Intent(Settings.ACTION_MANAGE_OVERLAY_PERMISSION,\n                                   Uri.parse("package:" + getPackageName()));\n        startActivityForResult(intent, OVERLAY_PERMISSION_REQ_CODE);\n    }\n}\n')),Object(r.b)("p",null,"Finally, the ",Object(r.b)("inlineCode",{parentName:"p"},"onActivityResult()")," method (as shown in the code below) has to be overridden to handle the permission Accepted or Denied cases for consistent UX. Also, for integrating Native Modules which use ",Object(r.b)("inlineCode",{parentName:"p"},"startActivityForResult"),", we need to pass the result to the ",Object(r.b)("inlineCode",{parentName:"p"},"onActivityResult")," method of our ",Object(r.b)("inlineCode",{parentName:"p"},"ReactInstanceManager")," instance."),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-java"},"@Override\nprotected void onActivityResult(int requestCode, int resultCode, Intent data) {\n    if (requestCode == OVERLAY_PERMISSION_REQ_CODE) {\n        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.M) {\n            if (!Settings.canDrawOverlays(this)) {\n                // SYSTEM_ALERT_WINDOW permission not granted\n            }\n        }\n    }\n    mReactInstanceManager.onActivityResult( this, requestCode, resultCode, data );\n}\n")),Object(r.b)("h4",{id:"\u6838\u5fc3\u7ec4\u4ef6\uff1areactrootview"},"\u6838\u5fc3\u7ec4\u4ef6\uff1a",Object(r.b)("inlineCode",{parentName:"h4"},"ReactRootView")),Object(r.b)("p",null,"\u6211\u4eec\u8fd8\u9700\u8981\u6dfb\u52a0\u4e00\u4e9b\u539f\u751f\u4ee3\u7801\u6765\u542f\u52a8 React Native \u7684\u8fd0\u884c\u65f6\u73af\u5883\u5e76\u8ba9\u5b83\u5f00\u59cb\u6e32\u67d3\u3002\u9996\u5148\u9700\u8981\u5728\u4e00\u4e2a",Object(r.b)("inlineCode",{parentName:"p"},"Activity"),"\u4e2d\u521b\u5efa\u4e00\u4e2a",Object(r.b)("inlineCode",{parentName:"p"},"ReactRootView"),"\u5bf9\u8c61\uff0c\u7136\u540e\u5728\u8fd9\u4e2a\u5bf9\u8c61\u4e4b\u4e2d\u542f\u52a8 React Native \u5e94\u7528\uff0c\u5e76\u5c06\u5b83\u8bbe\u4e3a\u754c\u9762\u7684\u4e3b\u89c6\u56fe\u3002"),Object(r.b)("blockquote",null,Object(r.b)("p",{parentName:"blockquote"},"\u5982\u679c\u4f60\u8981\u5728\u5b89\u5353 5.0 \u4ee5\u4e0b\u7684\u7cfb\u7edf\u4e0a\u8fd0\u884c\uff0c\u8bf7\u7528 ",Object(r.b)("inlineCode",{parentName:"p"},"com.android.support:appcompat")," \u5305\u4e2d\u7684 ",Object(r.b)("inlineCode",{parentName:"p"},"AppCompatActivity")," \u4ee3\u66ff ",Object(r.b)("inlineCode",{parentName:"p"},"Activity")," \u3002")),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-java"},'public class MyReactActivity extends Activity implements DefaultHardwareBackBtnHandler {\n    private ReactRootView mReactRootView;\n    private ReactInstanceManager mReactInstanceManager;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        SoLoader.init(this, false);\n\n        mReactRootView = new ReactRootView(this);\n        List<ReactPackage> packages = new PackageList(getApplication()).getPackages();\n        // \u6709\u4e00\u4e9b\u7b2c\u4e09\u65b9\u53ef\u80fd\u4e0d\u80fd\u81ea\u52a8\u94fe\u63a5\uff0c\u5bf9\u4e8e\u8fd9\u4e9b\u5305\u6211\u4eec\u53ef\u4ee5\u7528\u4e0b\u9762\u7684\u65b9\u5f0f\u624b\u52a8\u6dfb\u52a0\u8fdb\u6765\uff1a\n        // packages.add(new MyReactNativePackage());\n        // \u540c\u65f6\u9700\u8981\u624b\u52a8\u628a\u4ed6\u4eec\u6dfb\u52a0\u5230`settings.gradle`\u548c `app/build.gradle`\u914d\u7f6e\u6587\u4ef6\u4e2d\u3002\n\n        mReactInstanceManager = ReactInstanceManager.builder()\n                .setApplication(getApplication())\n                .setCurrentActivity(this)\n                .setBundleAssetName("index.android.bundle")\n                .setJSMainModulePath("index")\n                .addPackages(packages)\n                .setUseDeveloperSupport(BuildConfig.DEBUG)\n                .setInitialLifecycleState(LifecycleState.RESUMED)\n                .build();\n         // \u6ce8\u610f\u8fd9\u91cc\u7684MyReactNativeApp \u5fc5\u987b\u5bf9\u5e94"index.js"\u4e2d\u7684\n        // "AppRegistry.registerComponent()"\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\n        mReactRootView.startReactApplication(mReactInstanceManager, "MyReactNativeApp", null);\n\n        setContentView(mReactRootView);\n    }\n\n    @Override\n    public void invokeDefaultOnBackPressed() {\n        super.onBackPressed();\n    }\n}\n')),Object(r.b)("p",null,"Perform a \u201cSync Project files with Gradle\u201d operation."),Object(r.b)("p",null,"\u5982\u679c\u4f60\u4f7f\u7528\u7684\u662f Android Studio , \u53ef\u4ee5\u4f7f\u7528",Object(r.b)("inlineCode",{parentName:"p"},"Alt + Enter"),"\u5feb\u6377\u952e\u6765\u81ea\u52a8\u4e3a MyReactActivity \u7c7b\u8865\u4e0a\u7f3a\u5931\u7684 import \u8bed\u53e5\u3002\u6ce8\u610f",Object(r.b)("inlineCode",{parentName:"p"},"BuildConfig"),"\u5e94\u8be5\u662f\u5728\u4f60\u81ea\u5df1\u7684\u5305\u4e2d\u81ea\u52a8\u751f\u6210\uff0c\u65e0\u9700\u989d\u5916\u5f15\u5165\u3002\u5343\u4e07\u4e0d\u8981\u4ece",Object(r.b)("inlineCode",{parentName:"p"},"com.facebook..."),"\u7684\u5305\u4e2d\u5f15\u5165\uff01"),Object(r.b)("p",null,"\u6211\u4eec\u9700\u8981\u628a ",Object(r.b)("inlineCode",{parentName:"p"},"MyReactActivity")," \u7684\u4e3b\u9898\u8bbe\u5b9a\u4e3a ",Object(r.b)("inlineCode",{parentName:"p"},"Theme.AppCompat.Light.NoActionBar")," \uff0c\u56e0\u4e3a\u91cc\u9762\u6709\u8bb8\u591a\u7ec4\u4ef6\u90fd\u4f7f\u7528\u4e86\u8fd9\u4e00\u4e3b\u9898\u3002"),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-xml"},'<activity\n  android:name=".MyReactActivity"\n  android:label="@string/app_name"\n  android:theme="@style/Theme.AppCompat.Light.NoActionBar">\n</activity>\n')),Object(r.b)("blockquote",null,Object(r.b)("p",{parentName:"blockquote"},"\u4e00\u4e2a",Object(r.b)("inlineCode",{parentName:"p"},"ReactInstanceManager"),"\u53ef\u4ee5\u5728\u591a\u4e2a activities \u6216 fragments \u95f4\u5171\u4eab\u3002 You will want to make your own ",Object(r.b)("inlineCode",{parentName:"p"},"ReactFragment")," or ",Object(r.b)("inlineCode",{parentName:"p"},"ReactActivity")," and have a singleton ",Object(r.b)("em",{parentName:"p"},"holder")," that holds a ",Object(r.b)("inlineCode",{parentName:"p"},"ReactInstanceManager"),". When you need the ",Object(r.b)("inlineCode",{parentName:"p"},"ReactInstanceManager")," (e.g., to hook up the ",Object(r.b)("inlineCode",{parentName:"p"},"ReactInstanceManager")," to the lifecycle of those Activities or Fragments) use the one provided by the singleton.")),Object(r.b)("p",null,"\u4e0b\u4e00\u6b65\u6211\u4eec\u9700\u8981\u628a\u4e00\u4e9b activity \u7684\u751f\u547d\u5468\u671f\u56de\u8c03\u4f20\u9012\u7ed9",Object(r.b)("inlineCode",{parentName:"p"},"ReactInstanceManager"),"\uff1a"),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-java"},"@Override\nprotected void onPause() {\n    super.onPause();\n\n    if (mReactInstanceManager != null) {\n        mReactInstanceManager.onHostPause(this);\n    }\n}\n\n@Override\nprotected void onResume() {\n    super.onResume();\n\n    if (mReactInstanceManager != null) {\n        mReactInstanceManager.onHostResume(this, this);\n    }\n}\n\n@Override\nprotected void onDestroy() {\n    super.onDestroy();\n\n    if (mReactInstanceManager != null) {\n        mReactInstanceManager.onHostDestroy(this);\n    }\n    if (mReactRootView != null) {\n        mReactRootView.unmountReactApplication();\n    }\n}\n")),Object(r.b)("p",null,"\u6211\u4eec\u8fd8\u9700\u8981\u628a\u540e\u9000\u6309\u94ae\u4e8b\u4ef6\u4f20\u9012\u7ed9 React Native\uff1a"),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-java"},"@Override\n public void onBackPressed() {\n    if (mReactInstanceManager != null) {\n        mReactInstanceManager.onBackPressed();\n    } else {\n        super.onBackPressed();\n    }\n}\n")),Object(r.b)("p",null,"This allows JavaScript to control what happens when the user presses the hardware back button (e.g. to implement navigation). When JavaScript doesn't handle the back button press, your ",Object(r.b)("inlineCode",{parentName:"p"},"invokeDefaultOnBackPressed")," method will be called. By default this finishes your ",Object(r.b)("inlineCode",{parentName:"p"},"Activity"),"."),Object(r.b)("p",null,"Finally, we need to hook up the dev menu. By default, this is activated by (rage) shaking the device, but this is not very useful in emulators. So we make it show when you press the hardware menu button (use ",Object(r.b)("inlineCode",{parentName:"p"},"Ctrl + M")," if you're using Android Studio emulator):"),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-java"},"@Override\npublic boolean onKeyUp(int keyCode, KeyEvent event) {\n    if (keyCode == KeyEvent.KEYCODE_MENU && mReactInstanceManager != null) {\n        mReactInstanceManager.showDevOptionsDialog();\n        return true;\n    }\n    return super.onKeyUp(keyCode, event);\n}\n")),Object(r.b)("p",null,"\u73b0\u5728 activity \u5df2\u5c31\u7eea\uff0c\u53ef\u4ee5\u8fd0\u884c\u4e00\u4e9b JavaScript \u4ee3\u7801\u4e86\u3002"),Object(r.b)("h3",{id:"\u6d4b\u8bd5\u96c6\u6210\u7ed3\u679c"},"\u6d4b\u8bd5\u96c6\u6210\u7ed3\u679c"),Object(r.b)("p",null,"You have now done all the basic steps to integrate React Native with your current application. Now we will start the ","[Metro bundler][metro]"," to build the ",Object(r.b)("inlineCode",{parentName:"p"},"index.bundle")," package and the server running on localhost to serve it."),Object(r.b)("h5",{id:"1-\u8fd0\u884c-metro-\u670d\u52a1"},"1. \u8fd0\u884c Metro \u670d\u52a1"),Object(r.b)("p",null,"\u8fd0\u884c\u5e94\u7528\u9996\u5148\u9700\u8981\u542f\u52a8\u5f00\u53d1\u670d\u52a1\u5668\uff08Metro\uff09\u3002\u4f60\u53ea\u9700\u5728\u9879\u76ee\u6839\u76ee\u5f55\u4e2d\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u5373\u53ef\uff1a"),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-shell"},"$ yarn start\n")),Object(r.b)("h5",{id:"2-\u8fd0\u884c\u4f60\u7684\u5e94\u7528"},"2. \u8fd0\u884c\u4f60\u7684\u5e94\u7528"),Object(r.b)("p",null,"\u4fdd\u6301 Metro \u7684\u7a97\u53e3\u8fd0\u884c\u4e0d\u8981\u5173\u95ed\uff0c\u7136\u540e\u50cf\u5f80\u5e38\u4e00\u6837\u7f16\u8bd1\u8fd0\u884c\u4f60\u7684 Android \u5e94\u7528(\u5728\u547d\u4ee4\u884c\u4e2d\u6267\u884c",Object(r.b)("inlineCode",{parentName:"p"},"./gradlew installDebug"),"\u6216\u662f\u5728 Android Studio \u4e2d\u7f16\u8bd1\u8fd0\u884c)\u3002"),Object(r.b)("p",null,"\u7f16\u8bd1\u6267\u884c\u4e00\u5207\u987a\u5229\u8fdb\u884c\u4e4b\u540e\uff0c\u5728\u8fdb\u5165\u5230 MyReactActivity \u65f6\u5e94\u8be5\u5c31\u80fd\u7acb\u523b\u4ece Metro \u4e2d\u8bfb\u53d6 JavaScript \u4ee3\u7801\u5e76\u6267\u884c\u548c\u663e\u793a\uff1a"),Object(r.b)("p",null,Object(r.b)("img",{alt:"Screenshot",src:n(600).default})),Object(r.b)("h3",{id:"\u5728-android-studio-\u4e2d\u6253\u5305"},"\u5728 Android Studio \u4e2d\u6253\u5305"),Object(r.b)("p",null,"\u4f60\u4e5f\u53ef\u4ee5\u4f7f\u7528 Android Studio \u6765\u6253 release \u5305\uff01\u5176\u6b65\u9aa4\u57fa\u672c\u548c\u539f\u751f\u5e94\u7528\u4e00\u6837\uff0c\u53ea\u662f\u5728\u6bcf\u6b21\u7f16\u8bd1\u6253\u5305\u4e4b\u524d\u9700\u8981\u5148\u6267\u884c js \u6587\u4ef6\u7684\u6253\u5305(\u5373\u751f\u6210\u79bb\u7ebf\u7684 jsbundle \u6587\u4ef6)\u3002\u5177\u4f53\u7684 js \u6253\u5305\u547d\u4ee4\u5982\u4e0b\uff1a"),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-shell"},"$ npx react-native bundle --platform android --dev false --entry-file index.js --bundle-output android/com/your-company-name/app-package-name/src/main/assets/index.android.bundle --assets-dest android/com/your-company-name/app-package-name/src/main/res/\n")),Object(r.b)("blockquote",null,Object(r.b)("p",{parentName:"blockquote"},"\u6ce8\u610f\u628a\u4e0a\u8ff0\u547d\u4ee4\u4e2d\u7684\u8def\u5f84\u66ff\u6362\u4e3a\u4f60\u5b9e\u9645\u9879\u76ee\u7684\u8def\u5f84\u3002\u5982\u679c assets \u76ee\u5f55\u4e0d\u5b58\u5728\uff0c\u5219\u9700\u8981\u63d0\u524d\u81ea\u5df1\u521b\u5efa\u4e00\u4e2a\u3002")),Object(r.b)("p",null,"\u7136\u540e\u5728 Android Studio \u4e2d\u6b63\u5e38\u751f\u6210 release \u7248\u672c\u5373\u53ef\uff01"),Object(r.b)("h3",{id:"\u7136\u540e\u5462\uff1f"},"\u7136\u540e\u5462\uff1f"),Object(r.b)("p",null,"\u7136\u540e\u5c31\u53ef\u4ee5\u5f00\u53d1\u5566~\u53ef\u662f\u6211\u5b8c\u5168\u4e0d\u4f1a React Native \u600e\u4e48\u529e\uff1f"),Object(r.b)("p",null,"\u6211\u4eec\u5efa\u8bae\u4f60\u5148\u901a\u8bfb\u672c\u7ad9\u7684\u6240\u6709\u6587\u6863\uff0c\u770b\u770b\u535a\u5ba2\uff0c\u770b\u770b\u8bba\u575b\u3002\u5982\u679c\u89c9\u5f97\u77e5\u8bc6\u592a\u96f6\u6563\uff0c\u4e0d\u591f\u7cfb\u7edf\uff0c\u90a3\u4e48\u4f60\u4e5f\u53ef\u4ee5\u8003\u8651\u4e0b\u8d2d\u4e70\u6211\u4eec\u7684",Object(r.b)("a",{parentName:"p",href:"/about#%E6%8A%80%E6%9C%AF%E6%94%AF%E6%8C%81%E4%B8%8E%E5%95%86%E5%8A%A1%E5%90%88%E4%BD%9C"},"\u4ed8\u8d39\u54a8\u8be2\u670d\u52a1"),"\u3002"))}p.isMDXComponent=!0}}]);